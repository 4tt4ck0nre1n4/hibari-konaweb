---
import SafeIcon from "./SafeIcon.astro";

interface SnsProps {
  className: string;
  href: string;
  snsIconSvg?: string;
  snsIconName?: string;
  ariaLabel: string;
  ariaTitle: string;
  targetBlank?: string;
}

const { className, href, snsIconSvg, snsIconName, ariaLabel, ariaTitle, targetBlank } = Astro.props as SnsProps;

const snsIconWidth: number = 28;
const snsIconHeight: number = 28;
const isSvgAsset =
  typeof snsIconSvg === "string" &&
  snsIconSvg.trim() !== "" &&
  (snsIconSvg.endsWith(".svg") || snsIconSvg.startsWith("/") || snsIconSvg.startsWith("."));
---

<li class="sns-icon__item">
  <a class={className} href={href} target={targetBlank} aria-label={ariaLabel} title={ariaTitle}>
    {
      isSvgAsset ? (
        <img
          src={snsIconSvg}
          width={snsIconWidth}
          height={snsIconHeight}
          alt={snsIconName ?? ""}
          loading="lazy"
          decoding="async"
          fetchpriority="low"
          aria-hidden={snsIconName == null}
          data-sns-icon={snsIconSvg}
        />
      ) : (
        <SafeIcon name={snsIconSvg} width={snsIconWidth} height={snsIconHeight} />
      )
    }
    {snsIconName != null && snsIconName.trim() !== "" && <span class="sns-icon__name">{snsIconName}</span>}
  </a>
</li>
