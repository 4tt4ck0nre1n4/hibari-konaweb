---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import worksText from "../../data/worksText.json";
import globalText from "../../data/globalText.json";
import { WORKS_SLUG_API, WORKS_PATH_API } from "../../api/headlessCms";
import { getWordPressImageUrl } from "../../util/optimizeWordPressImage";

interface Works {
  id: number;
  date: number;
  title: {
    rendered: string;
  };
  slug: string;
  acf?: {
    screenshot_pc?: string;
    left_link?: string;
    span_access?: string;
    span_user?: string;
    span_password?: string;
    left_text?: string;
    pc_image?: string;
    right_header?: string;
    right_title?: string;
    icon_image?: string;
    right_access?: string;
    sp_image?: string;
    right_link?: string;
    description?: string;
    icon_vscode?: string;
    icon_cursor?: string;
    icon_html?: string;
    icon_css?: string;
    icon_sass?: string;
    icon_javascript?: string;
    icon_jquery?: string;
    icon_typescript?: string;
    icon_gsap?: string;
    icon_swiper?: string;
    icon_three?: string;
    icon_react?: string;
    icon_wordpress?: string;
    icon_vite?: string;
    icon_gulp?: string;
    icon_webpack?: string;
    icon_astro?: string;
    icon_netlify?: string;
    icon_vercel?: string;
    icon_github?: string;
    icon_canva?: string;
    icon_adobexd?: string;
    icon_photoshop?: string;
    icon_illustrator?: string;
    icon_figma?: string;
  };
}

interface WorksTextData {
  worksTitle: string;
  worksText: string;
  [key: string]:
    | {
        left_leadMenu: {
          header: string;
          body: string;
        }[];
      }
    | string;
}

const typedWorksText: WorksTextData = worksText as unknown as WorksTextData;

const { slug } = Astro.params as { slug: string };
// getStaticPaths()ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆçš„ã«ä½¿ç”¨
// Astro.propsã®å‹å®‰å…¨æ€§ã‚’ç¢ºä¿
const props = Astro.props as { work?: Works } | undefined;
const workFromProps = props?.work;
let work: Works | null = workFromProps || null;

const workTextData =
  slug in typedWorksText && typedWorksText[slug] !== null && typeof typedWorksText[slug] === "object"
    ? typedWorksText[slug]
    : null;

// propsã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã®ã¿ã€å€‹åˆ¥ã«APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è©¦è¡Œï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
if (!work) {
  try {
    const resWorks = await fetch(`${WORKS_SLUG_API}${slug}`);

    console.log("Fetching data WORKS_SLUG_API:", `${WORKS_SLUG_API}${slug}`);

    if (!resWorks.ok) {
      console.error("Failed to fetch work data. Status:", resWorks.status);
      // 507ã‚¨ãƒ©ãƒ¼ãªã©ã®ä¸€æ™‚çš„ãªã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯è­¦å‘Šã®ã¿
      if (resWorks.status === 507) {
        console.warn(`âš ï¸ [Works Slug] Server returned 507 (Insufficient Storage) for slug: ${slug}`);
        console.warn(`âš ï¸ [Works Slug] This may be a temporary server issue. Skipping this page.`);
      }
      throw new Error(`Failed to fetch work data: ${resWorks.status}`);
    }

    const data = (await resWorks.json()) as Works[];

    console.log("API Response:", data);

    if (Array.isArray(data) && data.length > 0 && data[0] !== undefined) {
      work = data[0];
    } else {
      console.warn(`No data found for slug: ${slug}`);
      work = null;
    }
  } catch (error) {
    console.error(`Error fetching work data for slug ${slug}:`, error);
    work = null;
  }
}

export async function getStaticPaths() {
  try {
    console.log("ğŸ” [Works Slug] Fetching works from:", WORKS_PATH_API);
    const res = await fetch(WORKS_PATH_API);

    if (!res.ok) {
      console.error(`âŒ [Works Slug] Failed to fetch works: ${res.status} ${res.statusText}`);
      console.error(`âŒ [Works Slug] API URL: ${WORKS_PATH_API}`);
      // 507ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯è­¦å‘Šã®ã¿ï¼ˆä¸€æ™‚çš„ãªã‚µãƒ¼ãƒãƒ¼å•é¡Œã®å¯èƒ½æ€§ï¼‰
      if (res.status === 507) {
        console.warn(`âš ï¸ [Works Slug] Server returned 507 (Insufficient Storage). This may be a temporary issue.`);
        console.warn(`âš ï¸ [Works Slug] Returning empty paths to prevent build failure.`);
        return [];
      }
      throw new Error(`Failed to fetch works data: ${res.status} ${res.statusText}`);
    }

    const dataWorks = (await res.json()) as Works[];
    console.log(`âœ… [Works Slug] Successfully fetched ${dataWorks.length} works`);

    if (!Array.isArray(dataWorks) || dataWorks.length === 0) {
      console.warn("âš ï¸ [Works Slug] No works found. Returning empty paths.");
      console.warn("âš ï¸ [Works Slug] This will result in 404 errors for work detail pages.");
      return [];
    }

    // å„workãƒ‡ãƒ¼ã‚¿ã‚’propsã¨ã—ã¦æ¸¡ã™ï¼ˆå€‹åˆ¥ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é¿ã‘ã‚‹ãŸã‚ï¼‰
    const paths = dataWorks.map((work) => ({
      params: { slug: work.slug },
      props: { work },
    }));

    console.log(`âœ… [Works Slug] Generated ${paths.length} work detail pages`);
    console.log(`ğŸ“‹ [Works Slug] Slugs:`, paths.map((p) => p.params.slug).join(", "));

    return paths;
  } catch (error) {
    console.error("âŒ [Works Slug] Error in getStaticPaths:", error);
    console.error("âŒ [Works Slug] API URL:", WORKS_PATH_API);
    if (error instanceof Error) {
      console.error("âŒ [Works Slug] Error message:", error.message);
      console.error("âŒ [Works Slug] Error stack:", error.stack);
    }
    // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ç©ºé…åˆ—ã‚’è¿”ã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’ç¶™ç¶šï¼ˆãƒ“ãƒ«ãƒ‰å…¨ä½“ã‚’åœæ­¢ã—ãªã„ï¼‰
    console.warn("âš ï¸ [Works Slug] Returning empty paths to prevent build failure.");
    return [];
  }
}

// ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ï¼ˆãƒ“ãƒ«ãƒ‰ã‚’åœæ­¢ã—ãªã„ï¼‰
if (!work) {
  console.error(`âŒ [Works Slug] No matching data found for slug: ${slug}`);
  console.error(`âŒ [Works Slug] This page will be generated as an error page.`);
  // ãƒ“ãƒ«ãƒ‰ã‚’åœæ­¢ã›ãšã€ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ç©ºã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½œæˆ
  work = {
    id: 0,
    date: 0,
    title: { rendered: "Work Not Found" },
    slug: slug,
    acf: undefined,
  } as Works;
}

const icons = work?.acf
  ? Object.entries(work.acf)
      .filter(([key, value]) => key.startsWith("icon_") && typeof value === "string" && value.trim() !== "")
      .map(([key, value]) => ({
        name: key.replace("icon_", ""),
        url: value.trim(),
      }))
  : [];

const worksSlugTitle = work?.title?.rendered;
const worksSlugDescription = work?.acf?.description ?? "";
const worksScreenshotPc = getWordPressImageUrl(work?.acf?.screenshot_pc) ?? "";
const worksSlugLeftLink = work?.acf?.left_link;
const worksSlugRightLink = work?.acf?.right_link;
const worksRightHeader = work?.acf?.right_header;
const worksRightAccess = work?.acf?.right_access;

// WordPressç”»åƒã¯å¤–éƒ¨é…ä¿¡ã®ãŸã‚ã€é€šå¸¸ã®imgã‚¿ã‚°ã‚’ä½¿ç”¨
const screenshotPcUrl = getWordPressImageUrl(work?.acf?.screenshot_pc) ?? "";
const pcImageUrl = getWordPressImageUrl(work?.acf?.pc_image) ?? "";
const spImageUrl = getWordPressImageUrl(work?.acf?.sp_image) ?? "";
const iconImageUrl = getWordPressImageUrl(work?.acf?.icon_image) ?? "";

const jsonLd = JSON.stringify({
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  name: worksSlugTitle,
  description: work?.acf?.description?.replace(/(<([^>]+)>)/gi, "").trim(),
  url: `${globalText.url}/works/${work.slug}`,
  dataPublished: work.date,
  author: {
    "@type": "Person",
    name: "hibari-konaweb.com",
  },
  image: worksScreenshotPc,
});

const worksSlugLinks = {
  slug: { rendered: work?.slug },
  ariaLabel: "ã®ãƒšãƒ¼ã‚¸ã¸(æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™)",
  ariaTitle: "ã®ãƒšãƒ¼ã‚¸ã¸(æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™)",
  targetBlank: "_blank",
};

const crumbs = [{ name: "Home", path: "/" }, { name: "Works", path: "/works" }, { name: worksSlugTitle }];
---

<Layout
  title={worksSlugTitle ?? "Work PageTitle Not Found"}
  description={worksSlugDescription}
  ogType={globalText.local.type}
  ogTitle={worksSlugTitle ?? "Work PageTitle Not Found"}
  ogDescription={worksSlugDescription}
  twitterTitle={worksSlugTitle ?? "Work PageTitle Not Found"}
  twitterDescription={worksSlugDescription}
  jsonLd={jsonLd}
>
  <div id="outer-container">
    <Header />
    <main id="page-wrap">
      <div class="breadcrumbs__wrapper">
        <Breadcrumbs {crumbs} />
      </div>
      <div>
        {
          work !== null && work.id !== 0 ? (
            <article class="work">
              <div class="split__container">
                <div class="split left left1">
                  <div class="left__imageInner">
                    <img
                      class="left__image"
                      src={screenshotPcUrl}
                      alt={worksSlugTitle?.trim() !== "" ? worksSlugTitle : "No image available"}
                      decoding="async"
                      loading="lazy"
                    />
                  </div>
                  <div class="left__inner">
                    {/* ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ« */}
                    <h2 class="left__title" set:html={worksSlugTitle ?? "No title available"} />
                    <a
                      class="left__link"
                      href={worksSlugLeftLink}
                      aria-label={`${worksSlugTitle}${worksSlugLinks.ariaLabel}`}
                      title={`${worksSlugTitle}${worksSlugLinks.ariaTitle}`}
                    >
                      {/* Basicèªè¨¼ãƒ†ã‚­ã‚¹ãƒˆ */}
                      <span set:html={work?.acf?.span_access ?? ""} />
                      {/* ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒ†ã‚­ã‚¹ãƒˆ */}
                      <span set:html={work?.acf?.span_user ?? ""} />
                      {/* ãƒ¦ãƒ¼ã‚¶ãƒ¼å */}
                      <span set:html={work?.acf?.span_password ?? ""} />
                      {/* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ */}
                      <span set:html={worksSlugLeftLink ?? ""} />
                      {/* ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ URL */}
                    </a>
                    {/* ã‚µã‚¤ãƒˆã®ç‰¹å¾´ */}
                    <ul class="left__leadMenu">
                      {workTextData?.left_leadMenu && workTextData.left_leadMenu.length > 0 ? (
                        workTextData.left_leadMenu.map(({ header, body }) => (
                          <li class="left__leadMenu_item">
                            <h2 class="left__leadMenu_header">{header}</h2>
                            <p class="left__leadMenu_body">{body}</p>
                          </li>
                        ))
                      ) : (
                        <li>
                          <p style="display:none;" />
                        </li>
                      )}
                    </ul>
                  </div>
                </div>

                <div class="split right site1">
                  {/* ã‚µã‚¤ãƒˆ pcç”»åƒ */}
                  <div class="right__pcImageInner">
                    <img
                      class="right__pcImage"
                      src={pcImageUrl}
                      alt={worksSlugTitle.trim() !== "" ? worksSlugTitle : "No image available"}
                      decoding="async"
                      loading="lazy"
                    />
                  </div>
                  {/* ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ« */}
                  <h1 class="right__header" set:html={worksRightHeader ?? "No title available"} />
                  {/* ãƒ­ã‚´ã‚¢ã‚¤ã‚³ãƒ³ */}
                  {iconImageUrl !== "" && (
                    <img
                      class="right__logoIcon"
                      src={iconImageUrl}
                      alt={worksSlugTitle.trim() !== "" ? worksSlugTitle : "No image available"}
                      decoding="async"
                      loading="lazy"
                    />
                  )}
                  {/* Basicèªè¨¼ãƒ†ã‚­ã‚¹ãƒˆ */}
                  <p class="right__text" set:html={worksRightAccess ?? ""} />
                  {/* ã‚µã‚¤ãƒˆ spç”»åƒ */}
                  {spImageUrl !== "" && (
                    <img
                      class="right__spImage"
                      src={spImageUrl}
                      alt={worksSlugTitle ?? "No image"}
                      loading="lazy"
                      decoding="async"
                    />
                  )}
                  {/* ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ URL */}
                  <a
                    class="right__link"
                    href={worksSlugRightLink}
                    aria-label={`${worksSlugRightLink}${worksSlugLinks.ariaLabel}`}
                    title={`${worksSlugRightLink}${worksSlugLinks.ariaTitle}`}
                    set:html={worksSlugRightLink}
                    target={worksSlugLinks.targetBlank}
                  />
                  {/* ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ */}
                  <ul class="right__iconMenu">
                    {icons.length > 0 ? (
                      icons.map(({ name, url }) => (
                        <li class="right__iconMenu_item">
                          <img
                            class="right__iconMenu_image"
                            src={url}
                            alt={`${name} icon`}
                            loading="lazy"
                            decoding="async"
                          />
                          <span class="right__iconMenu_text">{name}</span>
                          <div class="right__iconMenu_cover" />
                        </li>
                      ))
                    ) : (
                      <li class="right__iconMenu_item">
                        <span>{worksText.error.noIcon}</span>
                      </li>
                    )}
                  </ul>
                </div>
              </div>
            </article>
          ) : (
            <div>
              <h1>{worksText.error.title}</h1>
              <p>{worksText.error.text}</p>
            </div>
          )
        }
      </div><!-- #page-wrap -->
    </main>
  </div><!-- #outer-container -->
  <Footer />
</Layout>

<style is:global>
  :root {
    --container-bg-color: #333;
    --left-bg-color: linear-gradient(
      135deg,
      rgb(0 191 255 / 0.4) 0%,
      rgb(64 224 208 / 0.5) 50%,
      rgb(0 255 127 / 0.4) 100%
    );

    --right-bg-color: rgb(43 43 43 / 0.8);
    --right-button-hover-color: rgb(92 92 92 / 0.3);
    --hover-width: 75%;
    --other-width: 25%;
    /* --speed: 1000ms; */
    --speed: 800ms;
    --gradient: linear-gradient(150deg, rgb(0 19 172 / 1) 0%, rgb(100 255 209 / 1) 55%, rgb(43 255 152 / 1) 100%);
  }
  .work {
    color: var(--color-white);
    position: relative;
    z-index: 1;
    height: 100vh;
  }
  .split__container {
    width: 100%;
    height: 100%;
    background: var(--container-bg-color);
    position: relative;
  }
  .split.left::before,
  .split.right::before {
    position: absolute;
    content: "";
    width: 100%;
    height: 100%;
  }
  .split.left::before {
    background: var(--left-bg-color);
  }
  .split.right::before {
    background: var(--right-bg-color);
  }
  .split.left,
  .split.right,
  .split.left::before,
  .split.right::before {
    transition: var(--speed) all ease-in-out;
  }
  .hover-left .left,
  .hover-right .right {
    width: var(--hover-width);
  }
  .hover-left .split.left::before,
  .hover-right .split.right::before {
    background: transparent;
  }
  .hover-right .split.left::before {
    background: linear-gradient(
      135deg,
      rgb(255 182 193 / 0.25) 0%,
      rgb(255 105 180 / 0.3) 50%,
      rgb(255 20 147 / 0.25) 100%
    );
    background: var(--left-bg-color);
  }
  .hover-left .right,
  .hover-right .left {
    width: var(--other-width);
  }
  .hover-right .left::before,
  .hover-left .right::before {
    z-index: 2;
  }
  .split {
    width: 50%;
    height: 100%;
    position: absolute;
    overflow: hidden;
  }
  .split.right {
    display: grid;
  }
  /* å·¦ã‚µã‚¤ãƒ‰  */
  .split.left {
    top: 0;
    left: 0;
    background-position: top center;
    background-size: contain;
    background-repeat: no-repeat;
  }
  /* å·¦ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆç”»åƒ */
  .left__imageInner {
    width: 100%;
    height: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .left__image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    will-change: transform, opacity;
    opacity: 1;
  }
  /* å·¦ã‚µã‚¤ãƒ‰ ãƒ¢ãƒ¼ãƒ€ãƒ«é¢¨ */
  .split.left.left1 .left__inner {
    width: 95%;
    height: 100%;
    max-height: 100vh;
    color: var(--color-black);
    background-color: transparent;
    -webkit-backdrop-filter: blur(50px);
    backdrop-filter: blur(50px);
    background-image: linear-gradient(135deg, rgb(255 255 255 / 0.9), rgb(255 255 255 / 0.3));
    background-size: 100vw 100vh;
    box-shadow: 0px 4px 60px 0 rgb(56 74 244 / 0.75);
    border-radius: 1rem;
    position: absolute;
    top: 0%;
    left: 10%;
    left: 3%;
    z-index: 10;
    opacity: 0;
    overflow-y: auto;
    /* scrollbar-gutter: stable; */
    margin-inline: auto;
    padding-block: 3rem;
    padding-inline: 2rem;
    will-change: opacity, transform;
  }

  /* ãƒ›ãƒãƒ¼æ™‚ã«.left__innerã‚’è¡¨ç¤º */
  .hover-left .left__inner {
    opacity: 1;
  }
  /* å·¦ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ« */
  .left__title {
    font-size: 1.25rem;
    font-weight: 700;
    white-space: nowrap;
    margin-block-start: 1rem;
  }
  /* å·¦ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆãƒ†ã‚­ã‚¹ãƒˆ */
  .left__text {
    font-size: 1rem;
  }
  .left__leadMenu {
    list-style: none;
  }

  .left__leadMenu_header {
    font-size: 1rem;
    line-height: 1;
    letter-spacing: 0.04em;
    color: var(--color-purple);
    text-align: justify;
    margin-block-start: 2rem;
  }
  .left__leadMenu_body {
    font-size: 0.875rem;
    line-height: 1.6;
    letter-spacing: 0.16em;
    text-align: justify;
    margin-block-start: 0.5rem;
  }
  /* å·¦ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ URL */
  .left__link {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-black);
    text-decoration: none;
    margin-block-start: 1rem;
  }
  .left__link span {
    line-height: 2;
  }
  .left__link span:nth-child(4) {
    color: var(--color-purple);
    text-decoration: underline;
  }
  /* å³ã‚µã‚¤ãƒ‰ ãƒ­ã‚´ã‚¢ã‚¤ã‚³ãƒ³ */
  .right__logoIcon {
    width: 3rem;
    height: 3rem;
    box-shadow: 0 4px 15px 0 rgb(49 196 190 / 0.75);
    border-radius: 50%;
    position: absolute;
    top: 16%;
    left: 4%;
    z-index: 1;
    animation: transLogo 2s ease-in infinite alternate;
  }
  @keyframes transLogo {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(20px);
    }
  }
  /* å³ã‚µã‚¤ãƒ‰ ãƒ˜ãƒƒãƒ€ãƒ¼ ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ« */
  .right__header {
    font-size: 1.5rem;
    color: inherit;
    white-space: nowrap;
    position: absolute;
    top: 10%;
    left: 4%;
  }
  .right__header span {
    opacity: 0;
    transform: translateX(24px);
    transition:
      opacity 0.3s ease-in,
      transform 0.3s ease-in;
  }
  .right__header span + span {
    padding: 0.1em;
  }
  .right__header span.is-active {
    opacity: 1;
    transform: translateX(0);
  }
  /* å³ã‚µã‚¤ãƒ‰ Basicèªè¨¼ãƒ†ã‚­ã‚¹ãƒˆ */
  .right__text {
    width: 100%;
    width: 100%;
    max-width: 600px;
    font-size: 1rem;
    color: inherit;
    background-color: transparent;
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    background-image: linear-gradient(120deg, rgb(255 255 255 / 0.3), rgb(0 0 0 / 0.2));
    background-size: 100px 0px;
    box-shadow: 0px 4px 10px rgb(56 74 244 / 0.75);
    white-space: nowrap;
    border: rgb(43 255 152 / 1) 0.2em solid;
    border-radius: 0.5rem;
    position: absolute;
    top: 74%;
    left: 20%;
    left: 4%;
    opacity: 1;
    padding-block: 0.25rem;
    padding-inline: 0.5rem;
  }
  /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚µã‚¤ã‚ºã§ã¯.right__textã®spanã‚’é€šå¸¸è¡¨ç¤ºï¼ˆWordPressã‹ã‚‰æ¥ã‚‹æ§‹é€ ã‚’ä¿æŒï¼‰ */
  .right__text span {
    display: inline;
    opacity: 1;
    transition: opacity 0.8s ease;
  }
  /* å³ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆ pcç”»åƒ */
  .split.right {
    top: 0;
    right: 0;
    z-index: 0;
    overflow: hidden;
  }

  .right__pcImageInner {
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }
  .right__pcImage {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  /* å³ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆ spç”»åƒ */
  .split.right .right__spImage {
    width: auto;
    max-width: 40%;
    height: auto;
    max-height: 50%;
    position: absolute;
    top: 16%;
    right: 2%;
    object-fit: contain;
    animation: rotateCircle 10s linear infinite alternate;
  }
  @keyframes rotateCircle {
    0% {
      transform: translateY(-24px);
    }
    100% {
      transform: translateY(24px);
    }
  }
  /* å³ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ URL */
  .right__link {
    width: 100%;
    max-width: 90%;
    max-width: 600px;
    font-family: "Poppins", sans-serif;
    font-size: 0.9375rem;
    color: var(--color-white);
    background-color: transparent;
    background-image: linear-gradient(120deg, rgb(255 255 255 / 0.3), rgb(0 0 0 / 0.2));
    background-size: 100px 0px;
    text-decoration: none;
    border: rgb(43 255 152 / 1) 0.2em solid;
    box-shadow: 0 4px 16px rgb(49 196 190 / 0.75);
    border-radius: 0.5rem;
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    position: absolute;
    top: 64%;
    left: 4%;
    opacity: 0;
    transition:
      opacity 0.8s ease,
      transform 0.8s ease-in-out;
    padding-block: 0.5rem;
    padding-inline: 1rem;
  }
  .split.right .right__link:after {
    content: "";
    display: block;
    height: 0;
    opacity: 0;
    transform: translateY(-50%) scale(0.1);
    transition:
      opacity 0.5s,
      transform 0.8s ease-in-out;
    transition-delay: 0s, 0.4s;
  }
  /* .split.right .right__link:is(:hover, :focus-visible) {
    background: transparent;
  } */
  .hover-right .right__link {
    opacity: 1;
  }

  .split.right .right__link:is(:hover, :focus-visible)::after {
    opacity: 1;
    content: "";
    width: 100%;
    height: auto;
    position: absolute;
    top: 4%;
    left: 0.5%;
    z-index: -1;
    /* background: var(--gradient); */
    box-shadow: 0 4px 16px rgb(49 196 190 / 0.75);
    opacity: 1;
    transform: scale(1.1);
    transition-delay: 0s;
    transition:
      opacity 0.8s,
      transform 0.6s ease-in-out;
    border-radius: 0.5rem;
  }
  .right__link span {
    display: inline-block;
    opacity: 0;
    transform: translateY(-24px);
    transition:
      opacity 0.3s ease-in,
      transform 0.3s ease-in;
  }
  .right__link span + span {
    padding: 4px;
  }
  .right__link span.is-active {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.6s ease;
  }
  /* å³ã‚µã‚¤ãƒ‰ ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ */
  .right__iconMenu {
    width: 100%;
    height: 12%;
    display: flex;
    justify-content: space-around;
    align-items: center;
    background-color: transparent;
    box-shadow: 0px 4px 60px 0 rgb(56 74 244 / 0.75);
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
    background-image: linear-gradient(120deg, rgb(255 255 255 / 0.3), rgb(0 0 0 / 0.2));
    background-position: 200%;
    background-size: 40px 80px;
    position: absolute;
    bottom: 4%;
    right: 0%;
  }

  .split__container.right.right__iconMenu {
    opacity: 1;
  }
  .right__iconMenu_item {
    width: 10%;
    height: 70%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    position: relative;
  }
  .right__iconMenu_image {
    width: 50%;
    height: 100%;
    height: auto;
    box-shadow: 0 4px 15px 0 rgb(49 196 190 / 0.75);
    object-fit: contain;
    position: relative;
    transition: transform 0.3s ease-in-out;
  }
  .right__iconMenu_text {
    font-family: "Poppins", san-serif;
    font-size: 0.75rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    margin-top: -18px;
  }
  .right__iconMenu_item.is-active .right__iconMenu_image {
    transform: translateY(-24px);
  }
  .right__iconMenu_item.is-active .right__iconMenu_text {
    opacity: 1;
  }
  .right__iconMenu_item .right__iconMenu_cover {
    display: none;
  }

  /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
  @media (width <= 768px) {
    .work {
      height: auto;
      min-height: 100vh;
    }

    .split__container {
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 100vh;
      background: transparent;
    }

    /* å³ã‚µã‚¤ãƒ‰ã‚’å›ºå®š */
    .split.right {
      position: sticky;
      top: 0;
      width: 100%;
      height: auto;
      min-height: calc(100vh + 2rem);
      order: 1;
      overflow: visible;
      z-index: 3;
      padding-block-end: 2rem;
    }

    /* å·¦ã‚µã‚¤ãƒ‰ã‚’ä¸‹ã«é…ç½®ï¼ˆ.rightã®ä¸Šã‚’è¢«ã•ã‚‹ï¼‰ */
    .split.left {
      position: relative;
      width: 100%;
      height: auto;
      min-height: 100vh;
      background-color: aliceblue;
      order: 2;
      top: auto;
      left: auto;
      z-index: 2;
      margin-block-start: calc(100vh + 2rem);
      padding-block-start: 2rem;
      padding-block-end: 2rem;
    }

    /* ã‚¹ãƒãƒ›ã§ã®ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç„¡åŠ¹åŒ– */
    .hover-left .left,
    .hover-right .right,
    .hover-left .right,
    .hover-right .left {
      width: 100% !important;
    }

    .hover-left .split.left::before,
    .hover-right .split.right::before {
      background: transparent;
    }

    /* å·¦ã‚µã‚¤ãƒ‰ã®èƒŒæ™¯è‰²ã‚’è§£é™¤ï¼ˆé€æ˜ã«ï¼‰ */
    .split.left::before {
      background: transparent;
    }

    /* å³ã‚µã‚¤ãƒ‰ã®èƒŒæ™¯è‰²ã‚’è§£é™¤ï¼ˆé€æ˜ã«ï¼‰ */
    .split.right::before {
      background: transparent;
    }

    /* å·¦ã‚µã‚¤ãƒ‰ ãƒ¢ãƒ¼ãƒ€ãƒ«é¢¨ã®èª¿æ•´ */
    .split.left.left1 .left__inner {
      position: static;
      width: 100%;
      left: 0;
      opacity: 0;
      -webkit-backdrop-filter: none;
      backdrop-filter: none;
      background-image: none;
      box-shadow: none;
      margin-block: 2rem;
      padding-block: 2rem;
      padding-inline: 1.5rem;
      will-change: opacity, transform;
      overflow-y: visible;
      overflow: visible;
      max-height: none;
      height: auto;
    }

    .left__title {
      font-size: 1.125rem;
    }
    .left__link span {
      font-size: 0.9375rem;
      font-weight: normal;
    }

    .left__leadMenu_header {
      font-size: 1rem;
      margin-block-start: 1.5rem;
    }

    .left__leadMenu_body {
      font-size: 0.9375rem;
    }

    /* å³ã‚µã‚¤ãƒ‰ ãƒ­ã‚´ã‚¢ã‚¤ã‚³ãƒ³ã®èª¿æ•´ */
    .right__logoIcon {
      width: 3.5rem;
      height: 3.5rem;
      top: 12%;
      left: 50%;
      left: 5%;
      transform: translateX(-50%);
    }

    /* å³ã‚µã‚¤ãƒ‰ ãƒ˜ãƒƒãƒ€ãƒ¼ã®èª¿æ•´ */
    .right__header {
      width: 90%;
      font-size: 1.25rem;
      top: 4%;
      left: 50%;
      transform: translateX(-50%);
      white-space: normal;
      text-align: left;
    }

    /* å³ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆ spç”»åƒã®èª¿æ•´ */
    .split.right .right__spImage {
      width: auto;
      max-width: 30%;
      height: auto;
      max-height: 50%;
      top: 11%;
      right: 16%;
      transform: translateX(50%);
      object-fit: contain;
      animation: rotateCircleMobile 10s linear infinite alternate;
    }

    @keyframes rotateCircleMobile {
      0% {
        transform: translateX(50%) translateY(-12px);
      }
      100% {
        transform: translateX(50%) translateY(12px);
      }
    }

    /* å³ã‚µã‚¤ãƒ‰ Basicèªè¨¼ãƒ†ã‚­ã‚¹ãƒˆã®èª¿æ•´ */
    .right__text {
      width: 90%;
      max-width: 480px;
      font-size: 0.8125rem;
      line-height: 1.5;
      top: auto;
      top: 42%;
      bottom: auto;
      left: 50%;
      transform: translateX(-50%);
      white-space: normal;
      padding-block: 0.5rem;
      padding-inline: 0.75rem;
    }

    /* å³ã‚µã‚¤ãƒ‰ ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ã®èª¿æ•´ */
    .right__link {
      width: 90%;
      max-width: 480px;
      font-size: 0.9375rem;
      top: auto;
      top: 50%;
      bottom: auto;
      left: 50%;
      transform: translateX(-50%);
      white-space: normal;
      word-break: break-all;
      opacity: 1;
      padding-block: 0.75rem;
      padding-inline: 0.5rem;
    }

    /* å³ã‚µã‚¤ãƒ‰ ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã®èª¿æ•´ - æŠ˜ã‚Šè¿”ã—å¯¾å¿œ */
    .right__iconMenu {
      width: 100%;
      height: auto;
      min-height: 140px;
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      top: auto;
      bottom: auto;
      left: auto;
      right: auto;
      margin-block-start: auto;
      margin-block-end: 2rem;
      margin-top: auto;
      margin-bottom: 2rem;
      padding-block: 1.5rem;
      padding-inline: 0.5rem;
      z-index: 5;
      flex-shrink: 0;
    }
    .right__iconMenu_item {
      width: calc(20% - 0.5rem);
      min-width: 60px;
      height: 60px;
      flex-shrink: 0;
    }

    .right__iconMenu_image {
      width: 100%;
      max-width: 40px;
      height: auto;
    }

    .right__iconMenu_text {
      /* font-size: 0.625rem; */
      font-size: 0.875rem;
      margin-top: -12px;
    }

    .right__iconMenu_item.is-active .right__iconMenu_image {
      transform: translateY(-12px);
    }
  }

  /* ã‚ˆã‚Šå°ã•ã„ç”»é¢å‘ã‘ã®èª¿æ•´ */
  @media (width <= 480px) {
    .split.right {
      min-height: calc(100vh + 2rem);
      padding-block-end: 2rem;
    }
    .split.left {
      margin-block-start: calc(20vh + 2rem);
      padding-block-start: 2rem;
      padding-block-end: 2rem;
    }
    .split.right .right__spImage {
      right: 11%;
    }
    .right__header {
      font-size: 1.125rem;
    }

    .right__pcImageInner {
      aspect-ratio: 9 / 16;
    }

    .right__text {
      font-size: 0.75rem;
      top: 40%;
      padding-block: 0.5rem;
      padding-inline: 0.5rem;
    }

    .right__link {
      font-size: 0.875rem;
      font-weight: normal;
      top: 48%;
      padding-block: 0.5rem;
      padding-inline: 0.25rem;
    }

    .right__link span + span {
      padding: 2px;
    }

    .right__iconMenu_item {
      width: calc(25% - 0.5rem);
      min-width: 50px;
      height: 50px;
    }

    .right__iconMenu_image {
      max-width: 32px;
    }

    .right__iconMenu {
      min-height: 200px;
      position: relative;
      top: auto;
      bottom: auto;
      margin-block-start: auto;
      margin-block-end: 2rem;
      padding-block-start: 1rem;
      flex-shrink: 0;
    }

    .right__iconMenu_text {
      font-size: 0.875rem;
      color: var(--color-black);
    }
  }
</style>

<script>
  // @ts-nocheck
  // GSAPã‚’å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§é…å»¶èª­ã¿è¾¼ã¿ï¼ˆæœªä½¿ç”¨JavaScriptå‰Šæ¸›ã®ãŸã‚ï¼‰
  let gsapInstance: typeof import("gsap").gsap | null = null;
  let ScrollTriggerInstance: typeof import("gsap/ScrollTrigger").ScrollTrigger | null = null;

  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–ï¼ˆé‡è¤‡å®Ÿè¡Œã‚’é˜²æ­¢ï¼‰
  let isInitialized = false;

  async function loadGSAP() {
    if (gsapInstance && ScrollTriggerInstance) {
      return { gsap: gsapInstance, ScrollTrigger: ScrollTriggerInstance };
    }

    const [{ gsap }, { ScrollTrigger }] = await Promise.all([import("gsap"), import("gsap/ScrollTrigger")]);

    gsapInstance = gsap;
    ScrollTriggerInstance = ScrollTrigger;

    // GSAPãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ç™»éŒ²
    gsap.registerPlugin(ScrollTrigger);

    return { gsap, ScrollTrigger };
  }

  async function init() {
    if (isInitialized) {
      return; // æ—¢ã«åˆæœŸåŒ–æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
    }

    const { gsap, ScrollTrigger } = await loadGSAP();
    isInitialized = true;
    initSplitAnimations(gsap, ScrollTrigger);
  }

  // requestIdleCallbackã§é…å»¶èª­ã¿è¾¼ã¿
  if ("requestIdleCallback" in window) {
    requestIdleCallback(
      () => {
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", init);
        } else {
          init();
        }
      },
      { timeout: 2000 }
    );
  } else {
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", init);
    } else {
      setTimeout(init, 100);
    }
  }

  // View Transitionså¯¾å¿œ: ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†åˆæœŸåŒ–
  document.addEventListener("astro:after-swap", async () => {
    // ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†åˆæœŸåŒ–ã‚’è¨±å¯
    isInitialized = false;

    const { ScrollTrigger } = await loadGSAP();
    // ScrollTriggerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    ScrollTrigger.getAll().forEach((trigger) => {
      trigger.kill();
    });
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†åˆæœŸåŒ–
    init();
    // ScrollTriggerã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
    ScrollTrigger.refresh();
  });

  // ãƒªã‚µã‚¤ã‚ºæ™‚ã®å‡¦ç†ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹ã¨ãƒãƒƒãƒå‡¦ç†ã§æœ€é©åŒ–ï¼‰
  let resizeTimer: ReturnType<typeof setTimeout>;
  let isRefreshing = false;
  window.addEventListener(
    "resize",
    async () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(async () => {
        // æ—¢ã«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ä¸­ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼ˆãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†ã®æœ€é©åŒ–ï¼‰
        if (isRefreshing) return;

        isRefreshing = true;
        // requestIdleCallbackã§é…å»¶å®Ÿè¡Œï¼ˆãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã®è² è·ã‚’å‰Šæ¸›ï¼‰
        if ("requestIdleCallback" in window) {
          requestIdleCallback(
            async () => {
              const { ScrollTrigger } = await loadGSAP();
              ScrollTrigger.refresh();
              isRefreshing = false;
            },
            { timeout: 500 }
          );
        } else {
          // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
          requestAnimationFrame(async () => {
            const { ScrollTrigger } = await loadGSAP();
            ScrollTrigger.refresh();
            isRefreshing = false;
          });
        }
      }, 300); // ãƒ‡ãƒã‚¦ãƒ³ã‚¹æ™‚é–“ã‚’300msã«å»¶é•·
    },
    { passive: true }
  );

  function initSplitAnimations(
    gsap: typeof import("gsap").gsap,
    ScrollTrigger: typeof import("gsap/ScrollTrigger").ScrollTrigger
  ) {
    const containers = document.querySelectorAll(".split__container");
    const isMobile = window.innerWidth <= 768;

    // ãƒã‚¹ãƒˆã•ã‚ŒãŸé–¢æ•°ã‹ã‚‰ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã¨ã—ã¦ä¿æŒ
    function fadeInElement(element: Element | null) {
      if (element) {
        gsap.to(element, {
          opacity: 1,
          duration: 1.2,
          ease: "power1.out",
        });
      }
    }

    function fadeOutElement(element: Element | null) {
      if (element) {
        gsap.to(element, {
          opacity: 0,
          duration: 1,
          ease: "power1.out",
        });
      }
    }

    function addStyledText(element: Element | null, delay: number) {
      if (!element) return;

      // æ—¢ã«å‡¦ç†æ¸ˆã¿ã®è¦ç´ ï¼ˆspanã‚¿ã‚°ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹ï¼‰ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
      // ãŸã ã—ã€ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã¯DOMãŒç½®ãæ›ãˆã‚‰ã‚Œã‚‹ãŸã‚ã€é€šå¸¸ã¯å†å‡¦ç†ãŒå¿…è¦
      const textContent = element.textContent || "";
      if (textContent.trim() === "") return;

      // æ—¢å­˜ã®spanã‚¿ã‚°ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†å‡¦ç†
      const newText = [...textContent].map((char) => `<span>${char}</span>`);
      element.innerHTML = newText.join("");

      // æ—¢å­˜ã®is-activeã‚¯ãƒ©ã‚¹ã‚’ã‚¯ãƒªã‚¢
      Array.from(element.children).forEach((char) => {
        char.classList.remove("is-active");
      });

      // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†å®Ÿè¡Œ
      Array.from(element.children).forEach((char, index) => {
        setTimeout(() => char.classList.add("is-active"), delay * index);
      });
    }

    containers.forEach((container) => {
      const splitElement = {
        containers: container,
        left: container.querySelector(".left"),
        right: container.querySelector(".right"),
        rightHeader: container.querySelector(".right__header"),
        rightText: container.querySelector(".right__text"),
        spImage: container.querySelector(".right__spImage"),
        rightLink: container.querySelector(".right__link"),
        iconMenuItems: container.querySelectorAll(".right__iconMenu_item"),
      };

      // æ—¢å­˜ã®ãƒ›ãƒãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ã‚¯ãƒªã‚¢ï¼ˆãƒšãƒ¼ã‚¸é·ç§»æ™‚ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆï¼‰
      container.classList.remove("hover-left", "hover-right");

      // è¦ç´ ã®åˆæœŸçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸é·ç§»æ™‚ã®çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ï¼‰
      if (splitElement.left) {
        const leftInner = splitElement.left.querySelector(".left__inner");
        const leftImage = splitElement.left.querySelector(".left__image");
        if (leftInner) {
          gsap.set(leftInner, { opacity: 0 });
        }
        if (leftImage) {
          gsap.set(leftImage, { opacity: 1 });
        }
      }
      if (splitElement.right) {
        if (splitElement.spImage) {
          gsap.set(splitElement.spImage, { opacity: 0 });
        }
        if (splitElement.rightText) {
          gsap.set(splitElement.rightText, { opacity: 0 });
        }
        if (splitElement.rightLink) {
          gsap.set(splitElement.rightLink, { opacity: 0 });
        }
      }

      // ã‚¹ãƒãƒ›ã‚µã‚¤ã‚ºã®å ´åˆã€ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹åŠ¹æœã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
      if (isMobile) {
        if (splitElement.spImage) {
          gsap.set(splitElement.spImage, { opacity: 1 });
        }
        if (splitElement.rightText) {
          gsap.set(splitElement.rightText, { opacity: 1 });
        }
        if (splitElement.rightLink) {
          gsap.set(splitElement.rightLink, { opacity: 1 });
          if (splitElement.rightLink.textContent) {
            addStyledText(splitElement.rightLink, 100);
          }
        }
        if (splitElement.rightHeader && splitElement.rightHeader.textContent) {
          addStyledText(splitElement.rightHeader, 200);
        }

        if (splitElement.left) {
          gsap.set(splitElement.left, { opacity: 1, y: 0 });

          const leftInner = splitElement.left.querySelector(".left__inner");
          if (leftInner) {
            gsap.set(leftInner, { opacity: 1, y: 0 });
          }

          ScrollTrigger.create({
            trigger: splitElement.left,
            start: "top bottom",
            end: "top center",
            scrub: true,
            onUpdate: (self) => {
              const progress = self.progress;
              if (leftInner) {
                gsap.set(leftInner, {
                  opacity: progress,
                  y: 30 * (1 - progress),
                  force3D: true,
                });
              }
            },
          });

          const leftImage = splitElement.left.querySelector(".left__image");
          if (leftImage) {
            ScrollTrigger.create({
              trigger: splitElement.left,
              start: "top bottom",
              end: "bottom top",
              scrub: true,
              onUpdate: (self) => {
                gsap.set(leftImage, {
                  y: -20 * self.progress,
                  force3D: true,
                });
              },
            });
          }
        }
      } else {
        // ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚µã‚¤ã‚ºã®å ´åˆã€ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–
        if (splitElement.left) {
          const leftImage = splitElement.left.querySelector(".left__image");

          splitElement.left.addEventListener("mouseenter", () => {
            container.classList.add("hover-left");
            // ç”»åƒã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆï¼ˆã‚‚ã†å°‘ã—è¡¨ç¤ºã•ã›ã¦ã‹ã‚‰ï¼‰
            if (leftImage) {
              gsap.to(leftImage, {
                opacity: 0,
                duration: 0.6,
                ease: "power1.out",
                delay: 1.3,
              });
            }
            // ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ï¼ˆç”»åƒãŒæ¶ˆãˆã¦ã‹ã‚‰ï¼‰
            setTimeout(() => fadeInElement(splitElement.left?.querySelector(".left__inner")), 2200);
          });

          splitElement.left.addEventListener("mouseleave", () => {
            container.classList.remove("hover-left");
            // ç”»åƒã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
            if (leftImage) {
              gsap.to(leftImage, {
                opacity: 1,
                duration: 0.4,
                ease: "power1.out",
              });
            }
            fadeOutElement(splitElement.left?.querySelector(".left__inner"));
          });
        }

        if (splitElement.right) {
          splitElement.right.addEventListener("mouseenter", () => {
            container.classList.add("hover-right");

            if (splitElement.spImage) setTimeout(() => fadeInElement(splitElement.spImage), 800);
            if (splitElement.rightHeader) addStyledText(splitElement.rightHeader, 200);
            if (splitElement.rightLink) {
              setTimeout(() => fadeInElement(splitElement.rightLink), 800);
              addStyledText(splitElement.rightLink, 100);
            }
            if (splitElement.rightText) {
              setTimeout(() => fadeInElement(splitElement.rightText), 800);
            }
          });

          splitElement.right.addEventListener("mouseleave", () => {
            container.classList.remove("hover-right");

            if (splitElement.spImage) fadeOutElement(splitElement.spImage);
            if (splitElement.rightText) fadeOutElement(splitElement.rightText);
            if (splitElement.rightLink) fadeOutElement(splitElement.rightLink);
          });
        }
      }

      // ã‚¢ã‚¤ã‚³ãƒ³ãƒ›ãƒãƒ¼
      if (splitElement.iconMenuItems) {
        splitElement.iconMenuItems.forEach((icon) => {
          icon.addEventListener("mouseenter", () => {
            icon.classList.add("is-active");
          });
          icon.addEventListener("mouseleave", () => {
            icon.classList.remove("is-active");
          });
        });
      }
    });
  }
</script>
