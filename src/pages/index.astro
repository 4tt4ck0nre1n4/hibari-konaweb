---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Logo from "../components/Logo.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Aside from "../components/Aside.astro";
import ResponsiveFv from "../components/ResponsiveFv.astro";
import GridSvg from "../components/GridSvg.astro";
import gridText from "../data/gridText.json";
import SafeIcon from "../components/SafeIcon.astro";
import SwiperMenu from "../components/SwiperMenu.astro";
import { hrefLink } from "../scripts/constLinks";
import globalText from "../data/globalText.json";
import SwiperDisplay from "../components/SwiperDisplay.astro";
import { play, pause, reverse, restart } from "../scripts/constButton";
import aboutCat from "../assets/svg/about-cat.svg";
import blogCat from "../assets/svg/blog-cat.svg";
import contactCat from "../assets/svg/contact-cat.svg";
import worksCat from "../assets/svg/works-cat.svg";
import homeCat from "../assets/svg/home-cat.svg";
import andMoreCat from "../assets/svg/andMore-cat.svg";
import sodenoura from "../assets/svg/sodenoura.svg";
import gaura from "../assets/svg/gauraStudio.svg";
import pikucha from "../assets/svg/pikucha.svg";
import sodenoura2 from "../assets/svg/sodenoura2.svg";
import gauraStudio2 from "../assets/svg/gauraStudio2.svg";
import pikucha2 from "../assets/svg/pikucha2.svg";
import backgroundImageSrc from "../assets/background.webp";
import { getImage } from "astro:assets";
import NaviCard from "../components/NaviCard.astro";
import Glitch from "../components/Glitch.astro";

const backgroundImage = await getImage({ src: backgroundImageSrc });
---

<Layout
  title={globalText.top.title}
  description={globalText.top.description}
  ogType={globalText.og.type}
  ogTitle={globalText.top.title}
  ogDescription={globalText.top.description}
  twitterTitle={globalText.top.title}
  twitterDescription={globalText.top.description}
>
  <!-- LCPËÉåÊôØÁîªÂÉè„ÅÆ„Éó„É™„É≠„Éº„ÉâÔºàPageSpeed InsightsÊúÄÈÅ©ÂåñÔºâ -->
  <link slot="head" rel="preload" href={backgroundImage.src} as="image" fetchpriority="high" />

  <div id="outer-container">
    <Header />
    <main id="page-wrap">
      <Logo />
      <div class="breadcrumbs__wrapper breadcrumbs__wrapper_top">
        <Breadcrumbs crumbs={[]} />
      </div>
      <div class="glitch-container">
        <NaviCard />
        <Glitch />
      </div>
      <!-- <div class="animated-sprite-container">
        <DepthAppearImage src={animeImage.src} alt="„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁîªÂÉè" client:load />
      </div> -->
      <!-- „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„ÉõÁî®Ôºö#main-container„ÅÆÁõ¥‰∏ä„Å´ÈÖçÁΩÆ -->
      <!-- <div class="responsive-fv-wrapper responsive-fv-wrapper--mobile">
        <ResponsiveFv />
      </div> -->
      <div class="swiper-display-container swiper-display-container--mobile">
        <SwiperDisplay />
      </div>
      <div id="main-container" style={`background-image: url(${backgroundImage.src})`}>
        <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁî®ÔºöResponsiveFv„ÅØÈùûË°®Á§∫ -->
        <div class="responsive-fv-wrapper responsive-fv-wrapper--desktop">
          <ResponsiveFv />
        </div>
        <aside class="toolbar">
          <Aside />
        </aside>
        <div id="js-grid" class="grid">
          <div class="wrapper">
            <ul id="js-grid__menu" class="grid__menu">
              <GridSvg
                className="item-1"
                href={hrefLink.about}
                ariaLabel={gridText.gridItem1.ariaLabel}
                ariaTitle={gridText.gridItem1.ariaTitle}
                imageSrc={aboutCat}
                imageMeta={gridText.gridItem1.Alt}
                tooltipText={gridText.gridItem1.tooltipText}
                tooltipPosition={gridText.gridItem1.tooltipPosition}
              />
              <GridSvg
                className="item-2"
                href={hrefLink.blog}
                ariaLabel={gridText.gridItem2.ariaLabel}
                ariaTitle={gridText.gridItem2.ariaTitle}
                imageSrc={blogCat}
                imageMeta={gridText.gridItem2.Alt}
                tooltipText={gridText.gridItem2.tooltipText}
                tooltipPosition={gridText.gridItem2.tooltipPosition}
              />
              <GridSvg
                className="item-3"
                href={hrefLink.contact}
                ariaLabel={gridText.gridItem3.ariaLabel}
                ariaTitle={gridText.gridItem3.ariaTitle}
                imageSrc={contactCat}
                imageMeta={gridText.gridItem3.Alt}
                stateMachines="State Machine 1"
                tooltipText={gridText.gridItem3.tooltipText}
                tooltipPosition={gridText.gridItem3.tooltipPosition}
              />
              <GridSvg
                className="item-4"
                href={hrefLink.works}
                ariaLabel={gridText.gridItem4.ariaLabel}
                ariaTitle={gridText.gridItem4.ariaTitle}
                imageSrc={worksCat}
                imageMeta={gridText.gridItem4.Alt}
                stateMachines="State Machine 1"
                tooltipText={gridText.gridItem4.tooltipText}
                tooltipPosition={gridText.gridItem4.tooltipPosition}
              />
              <GridSvg
                className="item-5"
                href={hrefLink.home}
                ariaLabel={gridText.gridItem5.ariaLabel}
                ariaTitle={gridText.gridItem5.ariaTitle}
                imageSrc={homeCat}
                imageMeta={gridText.gridItem5.Alt}
                stateMachines="State Machine 1"
                tooltipText={gridText.gridItem5.tooltipText}
                tooltipPosition={gridText.gridItem5.tooltipPosition}
              />
              <GridSvg
                className="item-6"
                href={hrefLink.home}
                ariaLabel={gridText.gridItem6.ariaLabel}
                ariaTitle={gridText.gridItem6.ariaTitle}
                imageSrc={andMoreCat}
                imageMeta={gridText.gridItem6.Alt}
                stateMachines="State Machine 1"
                tooltipText={gridText.gridItem6.tooltipText}
                tooltipPosition={gridText.gridItem6.tooltipPosition}
              />
              <GridSvg
                className="item-7 logoSvg-visible"
                href={hrefLink.work1}
                ariaLabel={gridText.gridItem7.ariaLabel}
                ariaTitle={gridText.gridItem7.ariaTitle}
                imageSrc={sodenoura}
                imageMeta={gridText.gridItem7.Alt}
                tooltipText={gridText.gridItem7.tooltipText}
                tooltipPosition={gridText.gridItem7.tooltipPosition}
              />
              <GridSvg
                className="item-8 logoSvg-visible"
                href={hrefLink.work2}
                ariaLabel={gridText.gridItem8.ariaLabel}
                ariaTitle={gridText.gridItem8.ariaTitle}
                imageSrc={gaura}
                imageMeta={gridText.gridItem8.Alt}
                tooltipText={gridText.gridItem8.tooltipText}
                tooltipPosition={gridText.gridItem8.tooltipPosition}
              />
              <GridSvg
                className="item-9 logoSvg-visible"
                href={hrefLink.work3}
                ariaLabel={gridText.gridItem9.ariaLabel}
                ariaTitle={gridText.gridItem9.ariaTitle}
                imageSrc={pikucha}
                imageMeta={gridText.gridItem9.Alt}
                tooltipText={gridText.gridItem9.tooltipText}
                tooltipPosition={gridText.gridItem9.tooltipPosition}
              />
              <GridSvg
                className="item-10 logoSvg-hidden"
                href={hrefLink.work1}
                ariaLabel={gridText.gridItem10.ariaLabel}
                ariaTitle={gridText.gridItem10.ariaTitle}
                imageSrc={sodenoura2}
                imageMeta={gridText.gridItem10.Alt}
                tooltipText={gridText.gridItem10.tooltipText}
                tooltipPosition={gridText.gridItem10.tooltipPosition}
              />
              <GridSvg
                className="item-11 logoSvg-hidden"
                href={hrefLink.work2}
                ariaLabel={gridText.gridItem11.ariaLabel}
                ariaTitle={gridText.gridItem11.ariaTitle}
                imageSrc={gauraStudio2}
                imageMeta={gridText.gridItem11.Alt}
                tooltipText={gridText.gridItem11.tooltipText}
                tooltipPosition={gridText.gridItem11.tooltipPosition}
              />
              <GridSvg
                className="item-12 logoSvg-hidden"
                href={hrefLink.work3}
                ariaLabel={gridText.gridItem12.ariaLabel}
                ariaTitle={gridText.gridItem12.ariaTitle}
                imageSrc={pikucha2}
                imageMeta={gridText.gridItem12.Alt}
                tooltipText={gridText.gridItem12.tooltipText}
                tooltipPosition={gridText.gridItem12.tooltipPosition}
              />
            </ul>
            <ul class="control__menu">
              <li class="control__menu_item">
                <button
                  id="play"
                  class="button"
                  type="button"
                  onclick="playAll()"
                  aria-label={gridText.play}
                  title={gridText.play}
                >
                  <SafeIcon class="button__image" name={play.icon} />
                </button>
              </li>
              <li>
                <button
                  id="pause"
                  class="button"
                  type="button"
                  onclick="pauseAll()"
                  aria-label={gridText.pause}
                  title={gridText.pause}
                >
                  <SafeIcon class="button__image" name={pause.icon} />
                </button>
              </li>
              <li>
                <button
                  id="reverse"
                  class="button"
                  type="button"
                  onclick="reverseAll()"
                  aria-label={gridText.reverse}
                  title={gridText.reverse}
                >
                  <SafeIcon class="button__image" name={reverse.icon} />
                </button>
              </li>
              <li>
                <button
                  id="restart"
                  class="button"
                  type="button"
                  onclick="restartAll()"
                  aria-label={gridText.restart}
                  title={gridText.restart}
                >
                  <SafeIcon class="button__image" name={restart.icon} />
                </button>
              </li>
            </ul>
          </div>
        </div>
        <div class="sidebar">
          <SwiperMenu />
        </div>
      </div>
      <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁî®ÔºöfooterÁõ¥‰∏ä„Å´ÈÖçÁΩÆ -->
      <div class="swiper-display-container swiper-display-container--desktop">
        <SwiperDisplay />
      </div>
    </main>
    <Footer />
    <canvas id="canvas" class="canvas"></canvas>
  </div>
</Layout>

<script>
  // @ts-nocheck
  import JSConfetti from "js-confetti";

  function initConfetti() {
    const confetti = document.getElementById("confettiButton");
    const canvasElement = document.getElementById("canvas");
    const textCanvasElement = document.getElementById("confetti-text-canvas");

    if (canvasElement instanceof HTMLCanvasElement && textCanvasElement instanceof HTMLCanvasElement) {
      const devicePixelRatio = window.devicePixelRatio ?? 1;

      const rect = canvasElement.getBoundingClientRect();
      canvasElement.width = rect.width * devicePixelRatio;
      canvasElement.height = rect.height * devicePixelRatio;

      const textRect = textCanvasElement.getBoundingClientRect();
      textCanvasElement.width = textRect.width * devicePixelRatio;
      textCanvasElement.height = textRect.height * devicePixelRatio;

      const jsConfetti = new JSConfetti({ canvas: canvasElement });
      const context = textCanvasElement.getContext("2d");

      if (context) {
        let isAnimating = false;
        let currentOpacity = 0;

        const drawText = (opacity = 1) => {
          context.clearRect(0, 0, textCanvasElement.width, textCanvasElement.height);
          context.globalAlpha = opacity;
          currentOpacity = opacity;

          const screenWidth = window.innerWidth;
          const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
          const isAndroid = /Android/.test(navigator.userAgent);

          let fontSize;

          if (screenWidth <= 480) {
            if (isIOS) {
              fontSize = 44;
            } else if (isAndroid) {
              fontSize = 44;
            } else {
              fontSize = 40;
            }
          } else if (screenWidth <= 768) {
            fontSize = 48;
          } else {
            fontSize = 20;
          }

          context.font = `${fontSize}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`;
          const isDarkMode = document.documentElement.classList.contains("dark");
          context.fillStyle = isDarkMode ? "#f1f5f9" : "#020202";
          context.textAlign = "center";
          context.textBaseline = "middle";

          context.shadowColor = isDarkMode ? "rgba(0, 0, 0, 0.8)" : "rgba(255, 255, 255, 0.8)";
          context.shadowBlur = 2;
          context.shadowOffsetX = 1;
          context.shadowOffsetY = 1;

          const text = "Thank you for viewing my portfolio site!";
          const maxWidth = textCanvasElement.width * 0.9;
          const textMetrics = context.measureText(text);

          if (textMetrics.width > maxWidth) {
            const ratio = maxWidth / textMetrics.width;
            const minFontSize = screenWidth > 768 ? 28 : 28;
            fontSize = Math.max(minFontSize, fontSize * ratio);
            context.font = `${fontSize}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`;
          }

          context.fillText(text, textCanvasElement.width / 2, textCanvasElement.height / 2);

          context.shadowColor = "transparent";
          context.shadowBlur = 0;
          context.shadowOffsetX = 0;
          context.shadowOffsetY = 0;
        };

        window.addEventListener("resize", () => {
          const newDevicePixelRatio = window.devicePixelRatio ?? 1;

          const rect = canvasElement.getBoundingClientRect();
          canvasElement.width = rect.width * newDevicePixelRatio;
          canvasElement.height = rect.height * newDevicePixelRatio;

          const textRect = textCanvasElement.getBoundingClientRect();
          textCanvasElement.width = textRect.width * newDevicePixelRatio;
          textCanvasElement.height = textRect.height * newDevicePixelRatio;

          if (isAnimating && currentOpacity > 0) {
            drawText(currentOpacity);
          } else if (!isAnimating && currentOpacity > 0) {
            drawText();
          }
        });

        if (confetti) {
          // console.log("Adding click listener to confetti button");
          confetti.addEventListener("click", () => {
            // console.log("Confetti button clicked!");

            context.clearRect(0, 0, textCanvasElement.width, textCanvasElement.height);
            currentOpacity = 0;
            isAnimating = true;

            jsConfetti
              .addConfetti({
                emojis: ["üíú", "üíñ", "üåà", "‚ú®", "üí´", "üå∏", "thanks", "üíõ", "üíó", "üíò", "üåü", "happy"],
              })
              .then(() => jsConfetti.addConfetti({ confettiRadius: 3 }))
              .then(() => {
                let opacity = 0;
                const fadeIn = setInterval(() => {
                  if (opacity < 1) {
                    opacity += 0.05;
                    drawText(opacity);
                  } else {
                    clearInterval(fadeIn);

                    setTimeout(() => {
                      let fadeOpacity = 1;
                      const fadeOut = setInterval(() => {
                        if (fadeOpacity > 0) {
                          fadeOpacity -= 0.05;
                          drawText(fadeOpacity);
                        } else {
                          clearInterval(fadeOut);
                          context.clearRect(0, 0, textCanvasElement.width, textCanvasElement.height);
                          currentOpacity = 0;
                          isAnimating = false;
                        }
                      }, 50);
                    }, 3000);
                  }
                }, 50);
              })
              .catch((error) => {
                console.error("Confetti animation failed:", error);
                isAnimating = false;
              });
          });
        } else {
          console.error("confettiButton element not found!");
        }
      }
    } else {
      if (!canvasElement) {
        console.error("Full-screen canvas element (#canvas) not found!");
      }
      if (!textCanvasElement) {
        console.error("Text canvas element (#confetti-text-canvas) not found!");
      }
    }
  }

  // „Çà„ÇäÁ¢∫ÂÆü„Å™ÂàùÊúüÂåñÊñπÊ≥ï
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initConfetti);
  } else {
    // DOMÊó¢„Å´„É≠„Éº„ÉâÊ∏à„Åø„ÅÆÂ†¥Âêà„ÅØÂç≥Â∫ß„Å´ÂÆüË°å
    initConfetti();
  }
</script>

<style is:global>
  /* ResponsiveFv„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆË°®Á§∫Âà∂Âæ° */
  .responsive-fv {
    display: none;
  }

  #main-container {
    display: grid;
    grid-template-columns: 24% 50% 24%;
    gap: 1%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    padding-block: 1.5rem;
    min-height: 600px; /* CLS„ÇíÈò≤„Åê„Åü„ÇÅ„Å´ÊúÄÂ∞èÈ´ò„Åï„ÇíË®≠ÂÆö */
  }

  .toolbar {
    min-height: 400px; /* CLS„ÇíÈò≤„Åê„Åü„ÇÅ„Å´ÊúÄÂ∞èÈ´ò„Åï„ÇíË®≠ÂÆö */
  }

  .sidebar {
    min-height: 400px; /* CLS„ÇíÈò≤„Åê„Åü„ÇÅ„Å´ÊúÄÂ∞èÈ´ò„Åï„ÇíË®≠ÂÆö */
  }

  /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Çµ„Ç§„Ç∫„Åß„ÅÆswiper-display-container„ÅÆÈÖçÁΩÆ */
  /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅØfooterÁõ¥‰∏ä„Å´ÈÖçÁΩÆ */
  .responsive-fv-wrapper--mobile {
    display: none; /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅØÈùûË°®Á§∫ */
  }

  .responsive-fv-wrapper--desktop {
    display: none; /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅØResponsiveFv„ÅØÈùûË°®Á§∫ */
  }

  .swiper-display-container--mobile {
    display: none; /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅØÈùûË°®Á§∫ */
  }

  .swiper-display-container--desktop {
    display: block; /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅØË°®Á§∫ */
    width: 100%;
  }
  .glitch-container {
    width: 100%;
    height: 100vh;
    max-width: 1400px;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #000000;
    background-color: aliceblue;
    /* background-image: repeating-conic-gradient(#000000 0% 25%, #111111 0% 50%);
    background-size: 240px 80px;
    animation: noise 1s infinite linear; */
    margin-inline: auto;
    position: relative;
    isolation: isolate;
  }
  @keyframes noise {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 100% 100%;
    }
  }
  @media screen and (max-width: 480px) {
    .glitch-container {
      width: 96%;
    }
  }

  /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁîªÂÉè„Ç≥„É≥„ÉÜ„Éä */
  .animated-sprite-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    max-width: 1400px;
    min-height: 100vh;
    margin-block-start: -2rem;
    margin-inline: auto;
    padding-inline: 2rem;
  }

  /* „Çπ„Éû„Éõ„Çµ„Ç§„Ç∫„Åß„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁîªÂÉè„Ç≥„É≥„ÉÜ„ÉäË™øÊï¥ */
  @media screen and (max-width: 768px) {
    .animated-sprite-container {
      min-height: 100vh;
      padding-inline: 1rem;
    }
  }

  @media screen and (max-width: 480px) {
    .animated-sprite-container {
      min-height: 100vh;
      padding-inline: 0.5rem;
    }
  }

  /* tsParticles„Åå#main-container„ÅÆ‰∏ä„Å´Ë°®Á§∫„Åï„Çå„Çã„Çà„ÅÜ„Å´z-index„ÇíË™øÊï¥ */
  #main-container {
    position: relative;
    z-index: 1; /* tsParticlesÔºàz-index: 2Ôºâ„Çà„Çä‰∏ã„Å´Ë°®Á§∫ */
  }

  /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Çµ„Ç§„Ç∫„Åß„ÅÆ„É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
  @media screen and (max-width: 768px) {
    /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Åß„ÅØ#main-container„ÅÆÁõ¥‰∏ä„Å´ÈÖçÁΩÆ */
    .responsive-fv-wrapper--mobile {
      display: block; /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Åß„ÅØË°®Á§∫ */
      width: 100%;
      margin-bottom: 0.5rem;
    }

    .responsive-fv-wrapper--desktop {
      display: none; /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Åß„ÅØÈùûË°®Á§∫ */
    }

    .swiper-display-container--mobile {
      display: block; /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Åß„ÅØË°®Á§∫ */
      width: 100%;
      margin-bottom: 0.5rem;
    }

    .swiper-display-container--desktop {
      display: none; /* „Çø„Éñ„É¨„ÉÉ„Éà„Éª„Çπ„Éû„Éõ„Åß„ÅØÈùûË°®Á§∫ */
    }

    #main-container {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      padding-block: 1rem;
      padding-inline: 1rem;
      min-height: auto;
      z-index: 1; /* tsParticles„Çà„Çä‰∏ä„Å´Ë°®Á§∫ */
    }

    .toolbar {
      order: 1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      min-height: auto;
    }

    .grid {
      order: 3;
      width: 100%;
      height: auto;
      min-height: auto;
    }

    .sidebar {
      order: 2;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      min-height: auto;
    }

    .grid__menu {
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .control__menu {
      flex-direction: row;
      justify-content: center;
      gap: 0.5rem;
    }
  }

  /* 480px‰ª•‰∏ã„Åß„ÅÆË∂ÖÂ∞èÂûã„Çπ„Éû„ÉõÊúÄÈÅ©Âåñ */
  @media screen and (max-width: 480px) {
    #main-container {
      padding-inline: 0.5rem;
      gap: 0.5rem;
      min-height: auto;
    }

    .toolbar {
      grid-template-columns: 1fr;
      gap: 0.25rem;
      min-height: auto;
    }

    .sidebar {
      display: flex;
      flex-direction: column;
      margin-block-end: 0;
      gap: 0.35rem;
      min-height: auto;
    }

    .grid {
      margin-block-start: 1rem; /* „Çπ„Éû„Éõ„Çµ„Ç§„Ç∫„Åß„ÅÆ‰ΩôÁôΩË™øÊï¥ */
    }

    .grid__menu {
      grid-template-columns: 1fr;
      gap: 0.25rem;
    }

    .control__menu {
      flex-direction: row;
      gap: 0.25rem;
      padding-inline: 1rem;
    }
  }
  #main-container.is-notImage {
    background-image: none !important;
    background-color: transparent !important;
  }
  .is-notImage {
    transition: background 2s ease-in-out;
  }
  .toolbar {
    /* grid-area: 1 / 1 / 2 / 2; */
    /* grid-area: 1 / 1 / 1 / 1; */
    display: flex;
    flex-direction: column;
    row-gap: 0.75rem;
    color: inherit;
    position: relative;
  }
  .grid {
    grid-area: 1 / 2 / 2 / 3;
    width: 100%;
    height: 100%;
    position: relative;
    background-color: transparent;
    transition:
      5s height ease-out,
      5s opacity ease-out;
  }
  .canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: transparent;
    pointer-events: none;
    z-index: 9999;
  }
  .wrapper {
    width: 100%;
    max-width: 700px;
    margin-inline: auto;
  }
  .grid__menu {
    width: 100%;
    height: 100%;
    min-height: 408px; /* CLSÂØæÁ≠ñ: „Ç∞„É™„ÉÉ„Éâ„Ç¢„Ç§„ÉÜ„É†(100px x 4Ë°å) + gap + padding */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 1rem;
    justify-items: center;
    list-style: none;
    box-shadow: 0 8px 16px rgba(0 0 0 / 0.6);
    border-radius: 8%;
    position: relative;
    z-index: 1;
    overflow: hidden;
    padding-block: 2rem;
    transform-origin: center;
    /* transform-style: preserve-3d;
    transform: perspective(1600px); */
    transition: box-shadow 0.4s ease;
  }
  .grid__menu:is(:hover, :focus-visible) {
    box-shadow: 0 16px 8px rgba(0 0 0 / 0.6);
  }
  html.dark .grid__menu:is(:hover, :focus-visible) {
    box-shadow: 0 16px 8px rgba(255 255 255 / 0.6);
  }
  .grid__menu::before {
    content: "";
    width: 100%;
    max-width: 560px;
    height: 100%;
    max-height: 480px;
    display: block;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(236, 159, 255, 1),
      #ffffff71,
      rgba(147, 183, 255, 1),
      #ffffff71,
      rgba(170, 244, 254, 1),
      transparent
    );
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    transform: translateX(-200px) skew(-16deg);
    animation: shineGrid 6s linear infinite;
  }
  @keyframes shineGrid {
    0% {
      transform: translateX(-200px) skew(-16deg);
      opacity: 0;
    }
    8% {
      opacity: 1;
    }
    48% {
      transform: translateX(200px) skew(-16deg);
      opacity: 0.9;
    }
    56% {
      opacity: 0.3;
    }
    100% {
      transform: translateX(-200px) skew(-16deg);
      opacity: 0;
    }
  }
  .grid__menu_item {
    width: 100px;
    height: 100px;
    border-radius: 0.625rem;
    box-shadow: 0 8px 16px rgba(0 0 0 / 0.6);
    position: relative;
  }
  .grid__menu_item:is(:hover, :focus-visible) {
    background: transparent;
  }
  .grid__menu_item .grid__menu_link {
    display: block;
  }
  .grid__menu_item .grid__menu_link::before {
    position: absolute;
    content: "";
    transform: scale(0);
    opacity: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
  }
  .grid__menu_item .grid__menu_svg {
    width: 100%;
    height: 100%;
    aspect-ratio: 1 / 1;
    overflow: hidden;
    /* perspective: 1000px; */
    transition: transform 0.4s ease;
  }
  .item-1,
  .item-2,
  .item-3 {
    /* background: #ffffff; */
  }
  .item-7,
  .item-8,
  .item-9 {
    background: transparent;
  }
  .grid__menu_item .grid__menu_svg:is(:hover, :focus-visible) {
    /* border-radius: 100%; */
    transform: scale(1.1);
  }

  .grid__menu_svg img {
    width: 100%;
    height: 100%;
    border-radius: 0.625rem;
    object-fit: contain;
    image-rendering: high-quality;
    image-rendering: -webkit-optimize-contrast;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  /* .webpÁîªÂÉè„Å´ÊòéÁ§∫ÁöÑ„Å´object-fit: contain„ÇíÊåáÂÆö„Åó„ÄÅÈÆÆÊòé„Å™Ë°®Á§∫„ÇíÂÆüÁèæ */
  .grid__menu_item.item-10 .grid__menu_svg img,
  .grid__menu_item.item-11 .grid__menu_svg img,
  .grid__menu_item.item-12 .grid__menu_svg img {
    object-fit: contain;
    /* ÁîªÂÉè„ÇíÈÆÆÊòé„Å´Ë°®Á§∫„Åô„Çã„Åü„ÇÅ„ÅÆË®≠ÂÆö */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    /* „Éñ„É©„Ç¶„Ç∂„ÅÆÊúÄÈÅ©Âåñ„ÇíÁÑ°ÂäπÂåñ„Åó„Å¶È´òÂìÅË≥™„É¨„É≥„ÉÄ„É™„É≥„Ç∞ */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    /* GPU„Ç¢„ÇØ„Çª„É©„É¨„Éº„Ç∑„Éß„É≥„ÇíÊúâÂäπÂåñ */
    transform: translateZ(0);
    will-change: transform;
    /* „Ç¢„É≥„ÉÅ„Ç®„Ç§„É™„Ç¢„Ç∑„É≥„Ç∞„ÅÆÊúÄÈÅ©Âåñ */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .grid__menu_item:not(.item-4, .item-5, .item-6) .grid__menu_svg {
    /* background: transparent; */
    box-shadow: 0 0 0 rgba(0 0 0 / 0.1);
    animation: translateGridImage 20s linear infinite;
    animation-play-state: running;
  }
  .grid__menu_item:not(.item-4, .item-5, .item-6):is(:hover, :focus-visible) .grid__menu_svg {
    animation-play-state: paused;
    box-shadow: 0 12px 12px rgba(0 0 0 / 0.6);
    border-radius: 0.5rem;
    transition:
      border-radius 0.4s ease,
      box-shadow 0.4s ease;
  }
  @keyframes translateGridImage {
    0% {
      transform: translateY(0);
    }
    25% {
      transform: translateY(-8px);
    }
    50% {
      transform: translateY(0);
    }
    75% {
      transform: translateY(8px);
    }
    100% {
      transform: translateY(0);
    }
  }
  .item__tooltip_right {
    font-size: 0.875rem;
    color: #010101;
    background-color: #fff;
    item-shadow: 0px 10px 20px rgba(0, 0, 0, 0.6);
    white-space: nowrap;
    border: #ccc 1px solid;
    border-radius: 0.625rem;
    pointer-events: none;
    position: absolute;
    bottom: -10%;
    left: 120%;
    opacity: 0;
    transform: translateX(-50%);
    transition: opacity 0.3s ease;
    padding: 0.5rem;
  }
  .item__tooltip_left {
    font-size: 0.875rem;
    color: #010101;
    background-color: #fff;
    item-shadow: 0px 10px 20px rgba(0, 0, 0, 0.6);
    white-space: nowrap;
    border: #ccc 1px solid;
    border-radius: 0.625rem;
    pointer-events: none;
    position: absolute;
    bottom: -10%;
    left: -25%;
    opacity: 0;
    transform: translateX(-50%);
    transition: opacity 0.3s ease;
    padding: 0.5rem;
  }
  .item__tooltip_right::before {
    display: inline-block;
    content: "";
    border: transparent 12px solid;
    border-left: #fff 12px solid;
    position: absolute;
    bottom: 68%;
    right: 36%;
  }
  .item__tooltip_left::before {
    display: inline-block;
    content: "";
    border: transparent 12px solid;
    border-right: #fff 12px solid;
    position: absolute;
    bottom: 68%;
    left: 36%;
  }
  .control__menu {
    display: flex;
    justify-content: center;
    align-items: center;
    background: transparent;
    list-style: none;
    box-shadow: 0 8px 16px rgba(0 0 0 / 0.6);
    border-radius: 1rem;
    position: relative;
    z-index: 1;
    overflow: hidden;
    margin-block-start: 1rem;
    padding-block: 1rem;
    padding-inline: 3rem;
    transition: all 0.3s ease-in;
  }
  .control__menu:is(:hover, :focus-visible) {
    box-shadow: 0 16px 8px rgba(0 0 0 / 0.6);
  }
  html.dark .control__menu:is(:hover, :focus-visible) {
    box-shadow: 0 16px 8px rgba(255 255 255 / 0.6);
  }
  .control__menu::before {
    content: "";
    width: 100%;
    max-width: 560px;
    height: 100%;
    max-height: 120px;
    display: block;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(236, 159, 255, 1),
      #ffffff71,
      rgba(147, 183, 255, 1),
      #ffffff71,
      rgba(170, 244, 254, 1),
      transparent
    );
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    transform: translateX(-200px) skew(-16deg);
    animation: shineController 6s linear infinite;
    animation-delay: 0.6s;
  }
  @keyframes shineController {
    0% {
      transform: translateX(-200px) skew(-16deg);
      opacity: 0;
    }
    16% {
      opacity: 1;
    }
    48% {
      transform: translateX(200px) skew(-16deg);
      opacity: 0.9;
    }
    56% {
      opacity: 0.3;
    }
    100% {
      transform: translateX(-200px) skew(-16deg);
      opacity: 0;
    }
  }
  .button {
    display: block;
    width: 60px;
    height: 60px;
    background: linear-gradient(180deg, rgba(0, 19, 172, 1) 0%, rgba(100, 255, 209, 1) 55%, rgba(43, 255, 152, 1) 100%);
    background: linear-gradient(
      135deg,
      rgba(236, 159, 255, 1) 30%,
      rgba(147, 183, 255, 1) 55%,
      rgba(170, 244, 254, 1) 78%
    );
    box-shadow: 0 18px 20px rgba(0 0 0 / 0.6);
    border: #fff 1px solid;
    border-radius: 0.675rem;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    top: 1px;
    transform: rotate(0deg);
    transition:
      transform 0.1s ease,
      top 0.2s cubic-bezier(0.22, 1, 0.36, 1),
      border-radius 0.3s ease,
      box-shadow 0.6s ease;
    margin-inline: 1rem;
    padding: 0.5rem;
  }
  @media screen and (max-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {
    .grid {
      margin-block-start: 3rem;
    }
    .grid__menu {
      padding-inline: 0.5rem;
    }
    .button {
      margin-inline: 0.25rem;
    }
  }
  .button.is-rotating {
    background: linear-gradient(
      45deg,
      rgba(236, 159, 255, 1) 30%,
      rgba(147, 183, 255, 1) 55%,
      rgba(170, 244, 254, 1) 78%
    );
    top: -10px;
    border-radius: 50%;
    box-shadow:
      1px 2px 4px 0 var(--clay-box-shadow),
      2px 4px 8px 0 var(--clay-box-shadow),
      inset 2px 2px 8px var(--outset-shadow),
      inset -2px -2px 8px var(--inset-shadow);
    animation: rotateButton 2.5s linear infinite;
  }
  .button.reset-rotation {
    animation: none;
    transition: transform 0.6s ease;
    transform: rotate(0deg);
  }
  @keyframes rotateButton {
    to {
      transform: rotate(360deg);
    }
  }
  .button:active {
    transform: scale(0.8);
    box-shadow: 0 8px 8px rgba(0 0 0 / 0.4);
  }
  .button__image {
    width: 40px;
    height: 40px;
    object-fit: cover;
  }

  #play svg,
  #pause svg,
  #reverse svg,
  #restart svg {
    color: rgb(255, 255, 255);
    fill: rgb(255, 255, 255);
  }

  .sidebar {
    grid-area: 1 / 3 / 2 / 4;
    display: grid;
  }
  /* .particles-container {
    width: 100%;
    height: 200px;
    border: rebeccapurple 1px solid;
    position: relative;
  } */
  #tsparticles {
    width: 100%;
    height: 500px;
    display: block;
    /* „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà„ÇíÈÄèÈÅé„Åó„Å¶„ÄÅ„Éú„Çø„É≥„Åå„ÇØ„É™„ÉÉ„ÇØÂèØËÉΩ„Å´„Å™„Çã„Çà„ÅÜ„Å´„Åô„Çã */
    pointer-events: none;
  }

  /* „Åô„Åπ„Å¶„ÅÆ„Éú„Çø„É≥„Å´pointer-events: auto„ÇíË®≠ÂÆö„Åó„Å¶„ÇØ„É™„ÉÉ„ÇØÂèØËÉΩ„Å´„Åô„Çã */
  /* tsParticles„ÅåÂÖ®ÁîªÈù¢„ÇíË¶Ü„Å£„Å¶„ÇÇ„ÄÅ„Éú„Çø„É≥„Åå„ÇØ„É™„ÉÉ„ÇØÂèØËÉΩ„Å´„Å™„Çã„Çà„ÅÜ„Å´„Åô„Çã */
  button,
  .button,
  #toggleBackgroundButton,
  #clockIcon,
  #toggleLogoSvgButton,
  .particlesButton,
  #play,
  #pause,
  #reverse,
  #restart,
  #confettiButton,
  .particlesButton__inner,
  .tools__wrapper,
  .particles__wrapper {
    pointer-events: auto;
    position: relative;
    z-index: 10; /* tsParticlesÔºàz-index: 2Ôºâ„Çà„Çä‰∏ä„Å´Ë°®Á§∫ */
  }

  /* tsParticles„Ç≥„É≥„ÉÜ„ÉäËá™‰Ωì„ÅØpointer-events: none„Å†„Åå„ÄÅ„Åù„ÅÆ‰∏≠„ÅÆ„Éú„Çø„É≥„ÅØ„ÇØ„É™„ÉÉ„ÇØÂèØËÉΩ */
  .particles__inner {
    pointer-events: none;
  }

  .particles__inner > * {
    pointer-events: auto;
  }
</style>

<script>
  // @ts-nocheck
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const buttonSound = new Audio("/sounds/buttonSound.mp3");

  function playSound() {
    const isSoundOn = localStorage.getItem("sound-enabled") === "true";

    if (isSoundOn) {
      try {
        buttonSound.currentTime = 0;
        void buttonSound.play();
      } catch (error) {
        console.error("Sound playback failed:", error);
      }
    }
  }

  const tweens: any[] = [];

  function createTween(gsap: any, selector: any, props: any) {
    tweens.push(
      gsap.to(selector, {
        ...props,
        paused: true,
      })
    );
  }

  // ÂàùÊúü„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇíÂâäÈô§ÔºàCLSÂØæÁ≠ñÔºâ
  // gsap
  //   .timeline()
  //   .from(grid, {
  //     scale: 0.4,
  //     duration: 1,
  //     ease: "power1.in",
  //   })
  //   .from(
  //     gridMenu,
  //     {
  //       y: -200,
  //       duration: 1,
  //       ease: "power1.inOut",
  //     },
  //     "-=0.3"
  //   );

  // AstroË¶ÅÁ¥†„ÅÆ„Çπ„ÇØ„É≠„Éº„É´„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
  const pageContainer = document.getElementById("page-wrap");
  const astroElement = document.querySelector(".astro-a");

  if (astroElement && pageContainer) {
    gsap.to(astroElement, {
      y: () => pageContainer.offsetHeight * 0.2,
      ease: "power1.out",
      scrollTrigger: {
        trigger: pageContainer,
        start: "top top",
        end: "center end",
        scrub: true,
      },
    });
  }

  // Tooltip„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
  document.querySelectorAll(".grid__menu_item").forEach((item) => {
    const tooltipRight = item.querySelector(".item__tooltip_right") as HTMLElement;
    const tooltipLeft = item.querySelector(".item__tooltip_left") as HTMLElement;

    item.addEventListener("mouseenter", () => {
      [tooltipRight, tooltipLeft].forEach((tooltip) => {
        if (tooltip) {
          gsap.to(tooltip, {
            opacity: 1,
            y: -10,
            duration: 0.3,
            ease: "power1.out",
          });
        }
      });
    });

    item.addEventListener("mouseleave", () => {
      [tooltipRight, tooltipLeft].forEach((tooltip) => {
        if (tooltip) {
          gsap.to(tooltip, {
            opacity: 0,
            y: 0,
            duration: 0.3,
            ease: "power1.in",
          });
        }
      });
    });
  });

  // ÁîªÈù¢„Çµ„Ç§„Ç∫„Å®„Éá„Éê„Ç§„Çπ„Å´Âøú„Åò„Åü„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö
  const getAnimationSettings = () => {
    const screenWidth = window.innerWidth;
    const isMobile = screenWidth <= 768;
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const isAndroid = /Android/.test(navigator.userAgent);

    let item4X;
    let item6X;

    if (isMobile) {
      if (isIOS) {
        // iPhone: „ÅØ„ÅøÂá∫„Åó„ÇíÈò≤„Åê„Åü„ÇÅÂ∞ë„ÅóÂ∞è„Åï„ÇÅ„Å´Ë™øÊï¥
        item4X = 250;
        item6X = -250;
      } else if (isAndroid) {
        // Android: Ë∂≥„Çä„Å™„ÅÑÂàÜ„ÇíË£ú„ÅÜ„Åü„ÇÅÂ∞ë„ÅóÂ§ß„Åç„ÇÅ„Å´Ë™øÊï¥
        item4X = 264;
        item6X = -264;
      } else {
        // „Åù„ÅÆ‰ªñ„ÅÆ„Éá„Éê„Ç§„Çπ
        item4X = 254;
        item6X = -254;
      }
    } else {
      // „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó
      item4X = 440;
      item6X = -440;
    }

    return [
      [".item-1", { y: 230, rotation: 720, duration: 1.2 }],
      [".item-2", { y: 230, rotation: 360, duration: 1.6 }],
      [".item-3", { y: 230, rotation: 720, duration: 2 }],
      [".item-4", { x: item4X, rotation: 360, duration: 2.3 }],
      [".item-5", { x: 0, rotation: 1080, duration: 2.6 }],
      [".item-6", { x: item6X, rotation: 360, duration: 2.3 }],
      [".item-7", { y: -230, rotation: 720, duration: 1.4 }],
      [".item-8", { y: -230, rotation: 360, duration: 1.8 }],
      [".item-9", { y: -230, rotation: 720, duration: 2.2 }],
      [".item-10", { y: -230, rotation: 720, duration: 1.4 }],
      [".item-11", { y: -230, rotation: 360, duration: 1.8 }],
      [".item-12", { y: -230, rotation: 720, duration: 2.2 }],
    ];
  };

  const animationSettings = getAnimationSettings();

  // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö„ÇíÈÅ©Áî®
  animationSettings.forEach(([selector, props]) => createTween(gsap, selector, props));

  // „Ç¶„Ç£„É≥„Éâ„Ç¶„É™„Çµ„Ç§„Ç∫ÊôÇ„Å´„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö„ÇíÂÜçÁîüÊàê
  window.addEventListener("resize", () => {
    // Êó¢Â≠ò„ÅÆtween„Çí„ÇØ„É™„Ç¢
    tweens.forEach((tween) => tween.kill());
    tweens.length = 0;

    // Êñ∞„Åó„ÅÑË®≠ÂÆö„Åßtween„Çí‰ΩúÊàê
    const newAnimationSettings = getAnimationSettings();
    newAnimationSettings.forEach(([selector, props]) => createTween(gsap, selector, props));
  });

  // restart„Éú„Çø„É≥„ÅÆÂõûËª¢„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÔºàGSAP„Çí‰ΩøÁî®Ôºâ
  const rotateRestartButton = () => {
    const restartButton = document.getElementById("restart");
    if (!restartButton) return;

    gsap.fromTo(
      restartButton,
      {
        rotation: 0,
        scale: 1,
      },
      {
        rotation: 720,
        scale: 1.3,
        duration: 1.5,
        ease: "power2.inOut",
        onComplete: () => {
          gsap.set(restartButton, {
            clearProps: "rotation, scale",
          });
        },
      }
    );
  };

  let lastTriggeredSecond: any = null;

  const rotateRestartButtonTimeInterval = () => {
    setInterval(() => {
      const now = new Date();
      const seconds = now.getSeconds();

      if ((seconds === 0 || seconds === 30) && seconds !== lastTriggeredSecond) {
        rotateRestartButton();

        lastTriggeredSecond = seconds;
      } else if (seconds !== 0 && seconds !== 30) {
        lastTriggeredSecond = null;
      }
    }, 1000);
  };

  // ÊôÇÂàª„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇíÈñãÂßã
  rotateRestartButtonTimeInterval();

  function initButtonEvents() {
    function updateTooltipClassByPosition() {
      const item4 = document.querySelector(".item-4");
      const item6 = document.querySelector(".item-6");
      if (!item4 || !item6) return;

      const rect4 = item4.getBoundingClientRect();
      const rect6 = item6.getBoundingClientRect();

      const tooltip4 = item4.querySelector(".item__tooltip_left, .item__tooltip_right");
      const tooltip6 = item6.querySelector(".item__tooltip_left, .item__tooltip_right");

      if (tooltip4) {
        tooltip4.classList.remove("item__tooltip_left", "item__tooltip_right");
        tooltip4.classList.add(rect4.left < rect6.left ? "item__tooltip_left" : "item__tooltip_right");
      }

      if (tooltip6) {
        tooltip6.classList.remove("item__tooltip_left", "item__tooltip_right");
        tooltip6.classList.add(rect6.left < rect4.left ? "item__tooltip_left" : "item__tooltip_right");
      }
    }

    function playAll() {
      tweens.forEach((tween) => tween.play());
      updateTooltipClassByPosition();
      playSound();
    }
    function pauseAll() {
      tweens.forEach((tween) => tween.pause());
      updateTooltipClassByPosition();
      playSound();
    }
    function reverseAll() {
      tweens.forEach((tween) => tween.reverse());
      updateTooltipClassByPosition();
      playSound();
    }
    function restartAll() {
      tweens.forEach((tween) => tween.restart());
      updateTooltipClassByPosition();
      playSound();
    }

    document.getElementById("play")?.addEventListener("click", playAll);
    document.getElementById("pause")?.addEventListener("click", pauseAll);
    document.getElementById("reverse")?.addEventListener("click", reverseAll);
    document.getElementById("restart")?.addEventListener("click", restartAll);

    const controlMenu = document.querySelector(".control__menu");
    const buttons = document.querySelectorAll(".button");

    // ÂêÑ„Éú„Çø„É≥„ÅÆÂõûËª¢„Çø„Ç§„É†„Ç¢„Ç¶„Éà„ÇíÁÆ°ÁêÜ„Åô„ÇãMap
    const buttonRotationTimeouts = new Map();

    buttons.forEach((button) => {
      button.addEventListener("mouseenter", () => {
        // Êó¢Â≠ò„ÅÆ„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Çí„ÇØ„É™„Ç¢
        const existingTimeout = buttonRotationTimeouts.get(button);
        if (existingTimeout) {
          clearTimeout(existingTimeout);
          buttonRotationTimeouts.delete(button);
        }

        button.classList.remove("reset-rotation");
        button.classList.add("is-rotating");

        // 3ÁßíÂæå„Å´Ëá™ÂãïÁöÑ„Å´ÂõûËª¢„ÇíÂÅúÊ≠¢
        const timeoutId = setTimeout(() => {
          button.classList.remove("is-rotating");
          button.classList.add("reset-rotation");
          button.addEventListener(
            "transitionend",
            () => {
              button.classList.remove("reset-rotation");
            },
            {
              once: true,
            }
          );
          buttonRotationTimeouts.delete(button);
        }, 3000);

        buttonRotationTimeouts.set(button, timeoutId);
      });

      button.addEventListener("mouseleave", () => {
        // „Çø„Ç§„É†„Ç¢„Ç¶„Éà„Çí„ÇØ„É™„Ç¢
        const timeoutId = buttonRotationTimeouts.get(button);
        if (timeoutId) {
          clearTimeout(timeoutId);
          buttonRotationTimeouts.delete(button);
        }

        button.classList.remove("is-rotating");
      });
    });

    controlMenu?.addEventListener("mouseleave", () => {
      buttons.forEach((button) => {
        // „Çø„Ç§„É†„Ç¢„Ç¶„Éà„Çí„ÇØ„É™„Ç¢
        const timeoutId = buttonRotationTimeouts.get(button);
        if (timeoutId) {
          clearTimeout(timeoutId);
          buttonRotationTimeouts.delete(button);
        }

        button.classList.remove("is-rotating");
        button.classList.add("reset-rotation");
        button.addEventListener(
          "transitionend",
          () => {
            button.classList.remove("reset-rotation");
          },
          {
            once: true,
          }
        );
      });
    });
  }

  // DOMContentLoaded„Åß„Éú„Çø„É≥„Ç§„Éô„É≥„Éà„ÇíÂàùÊúüÂåñÔºàGSAP„Å´‰æùÂ≠ò„Åó„Å™„ÅÑÔºâ
  document.addEventListener("DOMContentLoaded", () => {
    initButtonEvents();
  });
</script>
