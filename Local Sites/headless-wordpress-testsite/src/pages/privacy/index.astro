---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { generateBreadcrumbs } from "../../util/generateBreadcrumbs";
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import revisionDatesJson from "../../data/revisionDates.json";
import { formatDateToISO } from "../../util/generateDateUtils";
import globalText from "../../data/globalText.json";

export const prerender = false;

interface Props {
  privacyTitle: string;
}

interface RevisionDate {
  data: string;
  path: string;
}

const crumbs = generateBreadcrumbs(Astro.url.pathname);

const privacyTitle = "プライバシーポリシー";

const establishmentDate = "2025年05月05日";
const establishmentDateIso = "2025-05-05";
const establishmentDateText = "制定日";

const toIso = (str: string) => {
  const match = str.match(/^(\d{4})年(\d{2})月(\d{2})日$/);
  return match ? `${match[1]}-${match[2]}-${match[3]}` : "";
};

const revisionDates = (revisionDatesJson as RevisionDate[]).slice();

const sortedRevisionDates = revisionDates.sort((a, b) => {
  const dateA = toIso(a.data);
  const dateB = toIso(b.data);
  return dateA.localeCompare(dateB);
});

const latestRevision = sortedRevisionDates.at(-1)?.data ?? null;

const contactLinks = {
  href: "/contact",
  ariaLabel: "お問い合わせページへ",
  ariaTitle: "お問い合わせページへ",
};
const googleAnalyticsLinks = {
  href: "https://developers.google.com/analytics",
  ariaLabel: "Googleアナリティクスのページへ（新しいタブで開く）",
  ariaTitle: "Googleアナリティクスのページへ（新しいタブで開く）",
  targetBlank: "_blank",
};
const googleAnalyticsTermsLinks = {
  href: "https://www.google.com/analytics/terms/",
  ariaLabel: "Googleアナリティクスの利用規約へ（新しいタブで開く）",
  ariaTitle: "Googleアナリティクスの利用規約へ（新しいタブで開く）",
  targetBlank: "_blank",
};
---

<Layout
  title={globalText.privacy.title}
  description={globalText.privacy.description}
  ogType={globalText.local.type}
  ogTitle={globalText.privacy.title}
  ogDescription={globalText.privacy.description}
  twitterTitle={globalText.privacy.title}
  twitterDescription={globalText.privacy.description}
>
  <div id="outer-container">
    <Header />
    <main id="page-wrap">
      <div class="breadcrumbs__wrapper">
        <Breadcrumbs {crumbs} />
      </div>
      <div class="privacy__wrapper">
        <h1 class="privacy__title">
          {privacyTitle}
        </h1>
        <p class="privacy__text">
          当サイトは、個人情報保護の重要性について認識し、個人情報の保護に関する法律、個人情報に関するガイドライン等の指針、その他個人情報保護に関する関係法令を遵守するとともに、以下のプライバシーポリシー（以下、「本ポリシー」といいます。）を定めます。
        </p>
        <p class="privacy__text">
          本ポリシーは、当サイトがどのような個人情報を取得し、どのように利用するか、ユーザーがどのようにご自身の個人情報を管理されるのかをご説明するものです。当サイトは本ポリシーに従い、個人情報の安全管理のために必要かつ適切な取り扱いと保護に努めます。
        </p>
        <ul class="privacy__dateMenu">
          <li class="privacy__menu_item">
            <p class="privacy__menu_date">
              {establishmentDateText} &#0058;
              <time datetime={establishmentDateIso}>
                {establishmentDate}
              </time>
            </p>
          </li>
          {
            sortedRevisionDates.map((entry: RevisionDate) => (
              <li class="privacy__menu_item">
                <p class="privacy__menu_date">
                  改定日 &#0058;
                  <a class="privacy__menu_link" href={entry.path}>
                    <time datetime={formatDateToISO(entry.data)}>{entry.data}</time>
                  </a>
                </p>
              </li>
            ))
          }
          <li class="privacy__menu_item">
            <p class="privacy__menu_date">
              最終改定日 &#0058;
              <time id="js-lastRevisedDate" datetime="">
                {latestRevision}
              </time>
            </p>
          </li>
        </ul>
        <h2 class="privacy__header">個人情報の取得について</h2>
        <p class="privacy__body">
          当サイトは、お問い合わせフォームからお問い合わせいただく際に、お名前、メールアドレス、その他お問い合わせ内容に関する個人情報を取得します。
        </p>
        <h2 class="privacy__header">個人情報の利用目的について</h2>
        <p class="privacy__body">
          お問い合わせいただいた際に取得した個人情報は、以下の目的で利用させていただくものであり、これらの目的以外で利用することはありません。
        </p>
        <ul class="privacy__menu">
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">お問い合わせ内容への対応</p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">必要な情報をご連絡する場合</p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">当サイトの運営の改善、開発に役立てるため</p>
          </li>
        </ul>
        <h2 class="privacy__header">個人情報の開示について</h2>
        <p class="privacy__body">
          当サイトは、以下のいずれかに該当する場合を除き、第三者に個人情報を提供することは致しません。
        </p>
        <ul class="privacy__menu">
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">ユーザーご本人から開示に対して同意がある場合</p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">正当な代理人からの請求がある場合</p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">各種法令に基づき、開示することが必要である場合</p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">
              人の生命、身体および財産などに対する差し迫った危険があり、<br /> 緊急の必要性がある場合であって、本人の同意を得ることが困難な場合
            </p>
          </li>
        </ul>
        <h2 class="privacy__header">個人情報の訂正および利用の停止等について</h2>
        <p class="privacy__body">
          当サイトは、ユーザーから、個人情報の内容が事実ではなく、訂正、追加、削除、利用の停止を求められた場合は、ユーザーご本人からの請求であることを確認させていただいたうえ、遅滞なく対応させていただきます。その結果に基づき個人情報の訂正等を行い、その旨をユーザーに通知します。
        </p>
        <p class="privacy__body">
          当サイトは、ユーザーから、以下のいずれかの場合の理由に基づき、個人情報の利用の停止または消去をもとめられた場合には、ユーザーご本人からの請求であることを確認させていただいたうえ、遅滞なく対応させていただきます。その結果に基づき個人情報の利用の停止等を行い、その旨をユーザーに通知します。
        </p>
        <ul class="privacy__menu">
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">
              本ポリシーで公表されている利用目的の範囲を超えて、<br />個人情報が取り扱われているという理由
            </p>
          </li>
          <li class="privacy__menu_item">
            <p class="privacy__menu_text">
              偽りや、その他の手段により、<br />個人情報が取得されたものであるという理由
            </p>
          </li>
        </ul>
        <h2 class="privacy__header">アクセス解析について</h2>
        <p class="privacy__body">
          当サイトは、アクセス状況などの統計的情報の解析ツールとして、Googleが提供する
          <a
            class="privacy__body_link"
            href={googleAnalyticsLinks.href}
            aria-label={googleAnalyticsLinks.ariaLabel}
            title={googleAnalyticsLinks.ariaTitle}
            target={googleAnalyticsLinks.targetBlank}
          >
            Google Analytics
          </a>
          を利用しています。Google Analytics（以下、「Google アナリティクス」といいます。）によって収集されるデータには、Webページの閲覧数、訪問者の地理的位置、デバイスの種類などが含まれます。
        </p>
        <p class="privacy__body">
          Googleアナリティクスは、トラフィックデータの収集のためにCookie（クッキー）を使用しています。トラフィックデータは、匿名で収集されており、名前、住所、メールアドレスなど個人を特定するような情報は含まれておらず、IPアドレス、ブラウザの種類、使用言語、アクセスしたページ、滞在時間などが含まれます。
        </p>
        <p class="privacy__body">
          Cookieとは、WebサーバーからWebブラウザに送信されるデータのことです。WebサーバーがCookieを参照することでユーザーのパソコンを識別することができ、効率的に当サイトを利用することができます。
        </p>
        <p class="privacy__body">
          Cookieの目的は、当サイトのアクセス状況に関する閲覧情報の把握に役立ち、サービス向上に資するものです。これにより、以前入力した情報を再度入力する必要がないなど当サイトを利用するユーザーの利便性が向上する機能が提供されています。この技術の使用により、個人情報を取得することはありません。
        </p>
        <p class="privacy__body">
          Cookieを無効にすることでトラフィックデータの収集を拒否することも可能です。お使いのWebブラウザの設定をご確認下さい。
        </p>
        <p class="privacy__body">
          当サイトはSSL（Secure Socket
          Layer）に対応しており、WebブラウザとWebサーバーとの通信を暗号化しています。ユーザーが入力する氏名や住所、電話番号などの個人情報は自動的に暗号化されます。
        </p>
        <p class="privacy__body">
          Googleアナリティクスによって収集された情報は、サイトのパフォーマンスの分析と改善、ユーザーへのコンテンツやサービスの提供を目的として使用する場合がございます。
        </p>
        <p class="privacy__body">
          詳しくはこちらの
          <a
            class="privacy__body_link"
            href={googleAnalyticsTermsLinks.href}
            aria-label={googleAnalyticsTermsLinks.ariaLabel}
            title={googleAnalyticsTermsLinks.ariaTitle}
            target={googleAnalyticsTermsLinks.targetBlank}
          >
            Googleアナリティクスの利用規約
          </a>
          をご覧ください。
        </p>
        <h2 class="privacy__header">個人情報の取り扱いに関するお問い合わせ</h2>
        <p class="privacy__body">
          当サイトの個人情報の取り扱いに関するお問い合わせは、
          <a
            class="privacy__body_link"
            href={contactLinks.href}
            aria-label={contactLinks.ariaLabel}
            title={contactLinks.ariaTitle}
          >
            お問い合わせフォーム
          </a>
          よりご連絡ください。
        </p>
        <h2 class="privacy__header">法令、規範の遵守と継続的な見直し</h2>
        <p class="privacy__body">
          当サイトは、保有する個人情報に関して適用される日本の法令、その他の規範を遵守するとともに、必要に応じて本ポリシーの内容を適宜見直し、継続的な改善に努めます。
        </p>
        <p class="privacy__body">修正された最新の本ポリシーは、常に当サイトの本ページにて開示されます。</p>
        <h2 class="privacy__header">本ポリシーの同意について</h2>
        <p class="privacy__body">当サイトをご利用いただくことにより、本ポリシーに同意されたものとみなします。</p>
        <h2 class="privacy__header">免責事項</h2>
        <p class="privacy__body">
          当サイトに掲載されているコンテンツ・情報について、可能な限り正確な情報を掲載するよう努めておりますが、必ずしもそれらの正確性や安全性等を保証するものではありません。誤情報や情報が古くなっている場合もございます。万が一、当サイトに掲載された内容によって発生したトラブルや損害等の一切の責任を負わないものとします。また、ユーザーが当サイトの情報を用いて行う一切の行為に関しても一切の責任を負わないものとします。あらかじめご了承くださいますようお願いいたします。
        </p>
        <p class="privacy__body">
          本免責事項、および当サイトに掲載しているコンテンツ・情報は、予告なしに変更・削除されることがあります。あらかじめご了承ください。修正された最新の本免責事項は、常に当サイトの本ページにて開示されます。
          <!-- 当サイトは、ユーザーが当サイトを利用したことにより生じたユーザーの損害およびユーザーが第三者に与えた損害に関して、一切の責任を負わないものとします。 -->
        </p>
        <h2 class="privacy__header">著作権・肖像権</h2>
        <p class="privacy__body">
          当サイト内の文章や画像、すべてのコンテンツは著作権・肖像権等により保護されています。無断での使用や転載することを禁止します。
        </p>
        <p class="privacy__body">
          また、当サイトは著作権の侵害を目的とするものではありません。使用している版権物の知的所有権はそれぞれの著作者・団体に帰属しております。著作権や肖像権に関して問題がありましたら
          <a
            class="privacy__body_link"
            href={contactLinks.href}
            aria-label={contactLinks.ariaLabel}
            title={contactLinks.ariaTitle}
          >
            お問い合わせフォーム
          </a>
          よりご連絡下さい。著作権所有者様からの警告及び修正・撤去のご連絡があった場合は迅速に対処または削除致します。
        </p>
        <h2 class="privacy__header">リンクについて</h2>
        <p class="privacy__body">
          当サイトはリンクフリーです。リンクを行う場合の許可や連絡は不要です。ただし、インラインフレームの使用や画像の直リンクはご遠慮ください。
        </p>
      </div>
    </main>
    <Footer />
  </div>
</Layout>

<style>
  .privacy__wrapper {
    width: 100%;
    max-width: 700px;
    margin-inline: auto;
    padding-block: 3rem;
  }

  .privacy__title {
    font-size: 1.5rem;
    letter-spacing: 0.1em;
    color: inherit;
    text-align: center;
    margin-block-start: 3rem;
  }

  .privacy__text {
    font-size: 1rem;
    line-height: 1.8;
    letter-spacing: 0.2em;
    color: inherit;
    text-align: justify;
    margin-block-start: 2rem;
  }

  .privacy__dateMenu {
    width: fit-content;
    list-style: none;
    margin-block-start: 2rem;
    margin-inline: auto;
  }

  .privacy__menu_date {
    font-size: 1rem;
    line-height: 1.8;
    letter-spacing: 0.1em;
  }
  .privacy__menu_link {
    font-size: 1rem;
    line-height: 1.8;
    letter-spacing: 0.1em;
    color: inherit;
  }
  .privacy__menu_link:is(:hover, :focus-visible) {
    color: rebeccapurple;
    text-decoration: underline;
  }

  .privacy__header {
    font-size: 1.25rem;
    letter-spacing: 0.1em;
    color: inherit;
    text-align: center;
    border: rebeccapurple 1px solid;
    margin-block-start: 4rem;
    padding-block: 0.5rem;
  }

  .privacy__body {
    font-size: 1rem;
    line-height: 2;
    letter-spacing: 0.2em;
    color: inherit;
    text-align: justify;
    margin-block-start: 2rem;
  }

  .privacy__menu {
    width: fit-content;
    margin-block-start: 2rem;
    margin-inline: auto;
  }

  .privacy__menu_text {
    font-size: 1rem;
    line-height: 1.8;
    letter-spacing: 0.2em;
    color: inherit;
    margin-block-start: 1rem;
  }

  .privacy__body_link {
    font-size: 1rem;
    color: rebeccapurple;
    text-decoration: none;
    transform: all 0.5s ease;
  }

  .privacy__body_link:is(:hover, :focus-visible) {
    color: rgba(0, 19, 172, 1);
    text-decoration: underline;
  }
</style>

<script>
  const lastUpdated = () => {
    const lastRevisedDate = new Date(document.lastModified);
    const year: number | string = lastRevisedDate.getFullYear();
    const month: number | string = (lastRevisedDate.getMonth() + 1).toString().padStart(2, "0");
    const date: number | string = lastRevisedDate.getDate().toString().padStart(2, "0");
    const hour: number | string = lastRevisedDate.getHours().toString().padStart(2, "0");
    const minutes: number | string = lastRevisedDate.getMinutes().toString().padStart(2, "0");
    const seconds: number | string = lastRevisedDate.getSeconds().toString().padStart(2, "0");

    let lastRevisedDateText = `${year}年${month}月${date}日`;
    let datetimeText = `${year}-${month}-${date}T${hour}:${minutes}:${seconds}Z`;

    const dateElement = document.getElementById("js-lastRevisedDate") as HTMLTimeElement;

    if (!dateElement) return;

    dateElement.textContent = lastRevisedDateText;
    dateElement.setAttribute("datetime", datetimeText);
  };

  window.addEventListener("DOMContentLoaded", () => {
    lastUpdated();
  });
</script>
